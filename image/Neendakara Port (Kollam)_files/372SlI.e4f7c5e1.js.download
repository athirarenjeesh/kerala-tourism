(this.$WP=this.$WP||[]).push(["372SlI",(e,t)=>{"use strict";var l,a,r,n,i,o,s,c,u,m,d,p,f,v,g,b,h,E,S,_,y,C,F,k,T,x,R,P,w,N,W,L,M,B,O,V,G,A,I,D,z,$,K,j,H,U,X,Y,q,J,Q,Z,ee,te,le,ae,re,ne,ie,oe,se,ce,ue,me,de,pe,fe,ve,ge,be,he,Ee,Se,_e,ye,Ce,Fe,ke,Te,xe,Re,Pe,we,Ne,We,Le,Me,Be,Oe,Ve,Ge,Ae,Ie,De,ze,$e="attractionType",Ke="REMOVE",je={mapCardCategoryClick:{clientContext:"mapCardCategory",clientParameter:"click"},mapFilterEnterClick:{clientContext:"mapFilter",clientParameter:"enterClick"},mapFilter:{clientContext:"mapFilter"},mapFilterFilterSelect:{clientParameter:"filterSelect"},mapFilterFilterDeselect:{clientParameter:"filterDeselect"}},He=({id:e,value:t,onSelect:a,children:r,selected:n,disabled:i=!1,typename:o})=>l.createElement("div",{className:c("gaiqh _W",{funmg:i})},l.createElement(E,{id:e,value:t,checked:n,disabled:i,onToggle:(e,t)=>{a(t)},label:l.createElement(h,{variant:"body-01"},r),variant:"WebPresentation_BubbleRatingFilterValue"===o?"trailCentered":"trail"})),Ue=({value:e,onSelect:t,children:l,selected:r,disabled:n})=>a.createElement("div",{className:c({"eVVUC W4":n})},a.createElement(y,{value:e,"aria-label":e,disabled:n,checked:r,onChange:()=>{t(!r)},marginRight:"spacing-01",marginY:"spacing-01"},a.createElement(h,{variant:"body-01"},l))),Xe={marginLeft1:"dBhKd",marginRight1:"cCzei",marginTop1:"cbSHg",marginBottom1:"eVjae",marginLeft2:"bGusc",marginRight2:"fksET",marginTop2:"bLFSo",marginBottom2:"cspKb",marginLeft3:"edkls",marginRight3:"eQkGL",marginTop3:"RiTin",marginBottom3:"MLeMj",marginLeft4:"bjDAD",marginRight4:"eyRbR",marginTop4:"faMvo",marginBottom4:"fbrwK",marginLeft5:"cxGsy",marginRight5:"cOCVE",marginTop5:"fBRVc",marginBottom5:"eXrsm",marginLeft6:"daVLy",marginRight6:"cSWgH",marginTop6:"eufYP",marginBottom6:"cDHZq",marginLeft7:"eRgrC",marginRight7:"dahXR",marginTop7:"FMwqw",marginBottom7:"eXqEW",marginLeft8:"civSC",marginRight8:"frWqN",marginTop8:"cAQlX",marginBottom8:"chJfh",marginLeft9:"frDlr",marginRight9:"bTXxI",marginTop9:"dthya",marginBottom9:"bwqlk",marginLeft10:"OOOCl",marginRight10:"LWpUV",marginTop10:"fyHai",marginBottom10:"bSjHJ"};function Ye(e){for(var t={},l=1;l<=10;l++)t[`spacing-${String(l).padStart(2,"0")}`]=Xe[`margin${e}${l}`];return t}function qe({margin:e,marginX:t,marginY:l,marginTop:a,marginBottom:r,marginLeft:n,marginRight:i}){var o=a||l||e,s=r||l||e,u=n||t||e,m=i||t||e;return c(o&&le.top[o],s&&le.bottom[s],u&&le.left[u],m&&le.right[m])}var Je=({color:e="inherit",size:t="inherit",...l},r=!1)=>{var n="inherit"!==t?`${t}px`:"1em",{isRtl:i}=a.useContext(L).locale;return{viewBox:"0 0 24 24",width:n,height:n,className:c("bDFSd d Vb",qe(l),"inherit"===e&&"ymbyq","primaryIcon"===e&&"XHxQa","secondaryIcon"===e&&"dZxVn","onDarkIcon"===e&&"dRJTS","primarySelectedIcon"===e&&"CYIDi","activeMapPinIcon"===e&&"cFxQv","bubbleIcon"===e&&"dWmWj","starIconFilled"===e&&"sFBYx","starIconEmpty"===e&&"Stndk","dragIcon"===e&&"eSOtO","dangerIcon"===e&&"frovT","verifiedCheckMarkIcon"===e&&"coqqe","accentPurpleText"===e&&"cYGZX","onLightText"===e&&"bVlNw","plusIcon"===e&&"ehGNF","textDisabled"===e&&"dasoo",!r&&i&&"eeDcX")}},Qe=e=>a.createElement("svg",Je(e,!0),a.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm0 18a8 8 0 110-16 8 8 0 010 16z"}),a.createElement("path",{d:"M12 6.5c-1.902 0-3.5 1.309-3.5 3v.5h2v-.5c0-.309.402-1 1.5-1s1.5.691 1.5 1c0 .353-.152.6-.463.866a6.087 6.087 0 01-.603.435 4.22 4.22 0 00-.641.492c-.462.462-.637 1.077-.711 1.448a4.345 4.345 0 00-.071.519c-.005.066-.011.74-.011.74h2v-.496s.021-.263.043-.37c.051-.254.127-.39.164-.427.039-.039.129-.104.371-.266l.016-.01c.203-.136.479-.32.744-.547.564-.484 1.162-1.237 1.162-2.384 0-1.691-1.598-3-3.5-3z"}),a.createElement("circle",{cx:12,cy:16.25,r:1.25})),Ze=e=>a.createElement("svg",Je(e),a.createElement("path",{d:"M18.4 7.4L12 13.7 5.6 7.4 4.2 8.8l7.8 7.8 7.8-7.8z"})),et=e=>a.createElement("svg",Je(e),a.createElement("path",{d:"M18.4 16.6L12 10.2l-6.4 6.4-1.4-1.5L12 7.4l7.8 7.7z"})),tt="dkoun v G u B- Cg _T Wc P0 w MJ",lt="flrsM",at="FUSION_FILTERS_COLLAPSED_SECTION",rt=e=>{var[t,a]=l.useState(!1);return u((()=>{a((e=>{var t=G.get(at);return!0===(null==t?void 0:t[e])})(e))}),[e]),l.useMemo((()=>({isCollapsed:t,updateCollapsed:t=>{((e,t)=>{var l=G.get(at);null==l&&(l={}),l[e]=t,G.set(at,l)})(e,t),a(t)}})),[t,e])},nt=()=>{var{localize:e}=f(),{trackClick:t}=b({clientContext:"showFilterTooltip"});return l.createElement(B,{triggeringElement:l.createElement(h,{marginLeft:"spacing-02",elementType:"div",variant:"title-05"},l.createElement(ae,null)),content:e.string("attractions.filters.languages_offered_tooltip"),variant:"top-caret",onShowTooltip:t})},it=({name:e,ariaLabelledBy:t,headerText:a="",headerElementType:n,tooltip:i,children:o})=>{var{isCollapsed:s,updateCollapsed:u}=ie(e),{trackClick:m}=b({clientContext:(s?"expand":"collapse")+"Filter"}),d=l.useCallback((()=>{u(!s),m()}),[s,u,m]),p=l.useCallback((e=>{var{keyCode:t}=e;t===O?(u(!0),m(),e.preventDefault()):t===V&&(u(!1),m(),e.preventDefault())}),[u,m]),f=(e=>`${e}_filter_contents`)(e);return l.createElement(r,{variant:"stack",gap:"gapless"},null!=a&&l.createElement("div",{className:tt},l.createElement(h,{id:t,elementType:n,variant:"title-04"},a),"language"===e?l.createElement(nt,null):i,l.createElement("button",{type:"button",className:"chozx _S B- NL",onClick:d,onKeyDown:p,"aria-expanded":!s,"aria-controls":f},l.createElement(W,null),s?l.createElement(re,{size:20}):l.createElement(ne,{size:20}))),l.createElement("div",{"data-filter-name":e,id:f,className:c(lt,{bokXp:s})},o))},ot=({id:e,name:t,headerElementType:a,headerText:n,tooltip:i,children:o})=>l.createElement(r,{variant:"stack",gap:"gapless"},null!=n&&l.createElement("div",{className:tt},l.createElement(h,{id:e,elementType:a,variant:"title-04"},n),l.createElement("span",{className:"QTyoq NL"},i)),l.createElement("div",{"data-filter-name":t,className:lt},o)),st=({name:e,headerText:t,headerElementType:a="div",tooltip:r,isCollapsible:n=!1,ariaLabelledBy:i,children:o})=>n?l.createElement(it,{ariaLabelledBy:i,name:e,headerText:t,headerElementType:a,tooltip:r},o):l.createElement(ot,{name:e,id:i,headerText:t,headerElementType:a,tooltip:r},o),ct=e=>a.createElement("svg",Je(e),a.createElement("path",{d:"M16.6 5.6L10.2 12l6.4 6.3-1.4 1.4L7.4 12l7.8-7.8z"})),ut=(e,t)=>[...new Map([...e,...t].map((e=>[`${e.name}-${e.value}`,e]))).values()],mt=(e=0,t=0)=>{var[a,r]="leftRail"===l.useContext(me)?ce:ue;return[e>0?e:a,t>0?t:r]},dt=(e,t)=>null!=e.filterName?e.filterName:t,pt={whiteBackground:"dYsdz u j w Z1",header:"fdQbQ",allHeader:"FDdBM",itemList:"eXqfS _A v K",item:"bVCed",searching:"bOaBW",searchable:"UCGZQ",unmatched:"cBmah"},ft=e=>{if(e){if("WebPresentation_SimpleTextFilterValue"===e.__typename)return e.localizedText;if("WebPresentation_TextFilterValue"===e.__typename)return e.text.text}return null},vt=({title:e,name:t,values:a,onClose:r,onApply:i,renderOption:o,singleSelect:s=!1,mapSurface:u=!1})=>{var[m,d]=l.useState(null),[v,g]=l.useState(""),E=l.useRef(),S=l.useRef(),_=l.useRef(),y=l.useRef(),C=l.useRef(),T=l.useRef(),x=l.useRef(),[R,P]=(e=>{var[t,a]=l.useState(""),r=l.useRef();return l.useEffect((()=>{r&&r.current?a(r.current.textContent):"string"==typeof e&&a(e)}),[e]),[r,t]})(e),w=l.useCallback((e=>g(e.target.value)),[]),N=l.useCallback((()=>g("")),[]),{localize:W}=f(),{trackClick:L}=b(),{desktop:M,mobile:B}=n();l.useEffect((()=>{d(null)}),[a]),l.useEffect((()=>{var e;return e&&clearTimeout(e),e=setTimeout((()=>{((e,t,l,a,r,n)=>{var i=!1,o=(e||"").toLowerCase();""!==o&&(i=!0);var s=!1;pt.searching.split(" ").forEach((e=>{t.classList.toggle(e,i)})),[...t.querySelectorAll(de)].forEach((e=>{var t=(e.textContent||"").toLowerCase().includes(o);s=s||t,pt.unmatched.split(" ").forEach((l=>{e.classList.toggle(l,i&&!t)}))})),s?(l.classList.add(...pt.unmatched.split(" ")),a.classList.remove(...pt.unmatched.split(" ")),r.classList.remove(...pt.unmatched.split(" ")),n.classList.remove(...pt.unmatched.split(" "))):(l.classList.remove(...pt.unmatched.split(" ")),a.classList.add(...pt.unmatched.split(" ")),r.classList.add(...pt.unmatched.split(" ")),n.classList.add(...pt.unmatched.split(" ")))})(v,E.current,S.current,_.current,y.current,C.current)}),300),()=>{e&&clearTimeout(e)}}),[v]);var O=()=>{L({clientContext:u?"mapFilter":"applyFilterOptionsModal",clientParameter:u?"save":null}),i&&m&&i(m),r()};if(!a)return null;var V=((e,t,l,a=!1)=>{if(a){var r,n,i=(null==(r=l.find((({selected:e})=>e)))?void 0:r.value)||null,o=(null==(n=t.find((({isSelected:e})=>e)))?void 0:n.value)||null,s=i||o;return t.map((t=>({...t,filterName:dt(t,e),isSelected:s===t.value})))}var c,u=(c=l,Object.fromEntries(c.map((e=>[e.value,e]))));return t.map((t=>({...t,filterName:dt(t,e),isSelected:t.value in u?u[t.value].selected:t.isSelected})))})(t,a.filter(Boolean),m||[],s),G=pe.has(t)?V:(e=>[...e].sort(((e,t)=>{if(null==e.object)return null!=t.object?1:0;if(null==t.object)return-1;var l=ft(e.object),a=ft(t.object);return null!==l&&null!==a?l.localeCompare(a):0})))(V),z=l.createElement(l.Fragment,null,l.createElement("ul",{className:pt.itemList,ref:E},G.map((e=>l.createElement("li",{key:e.value,className:c(pt.item,pt.searchable)},o(e,(l=>{((e,t,l)=>{d(ut(s||!m?[]:m,[{name:e,value:t,selected:l}]))})(null!=e.filterName?e.filterName:t,e.value,l)})))))),l.createElement("div",{className:pt.unmatched,ref:S},l.createElement("br",null),l.createElement(h,{variant:"title-04"},l.createElement(p,{id:"fusion_filters_search_no_results"})),l.createElement(h,{variant:"expressive-body-01"},l.createElement(p,{id:"fusion_filters_search_no_results_retry"})))),$=W.string("phoenix_accessibility_back_label"),K=u?l.createElement(k,{variant:"clear",icon:se,"aria-label":$,size:"small",onClick:O,ref:x}):null,j=u?"none":"right";return M?l.createElement(I,{title:l.createElement("div",{className:pt.whiteBackground},null!=e&&l.createElement("div",{className:pt.header},l.createElement(h,{elementType:"h4",variant:B?"title-05":"title-01"},l.createElement("span",{ref:R},e)))),primaryButton:l.createElement(F,{variant:"primary",size:"small",onClick:O},l.createElement(p,{id:"sng_fusion_list_filters_modal_apply"})," "),onClose:()=>{L({clientContext:u?"mapFilter":"closeFilterOptionsModal",clientParameter:u?"close":null}),r()},closeButtonPosition:j,backButton:K,variant:"fixed-height-sticky-footer",widthOption:"fixed-60",heightOption:"fixed-80"},l.createElement(D,{onChange:w,onClear:N,value:v,placeholder:W.string("sng_fusion_list_filters_modal_search_label",{title:P})}),null!=e&&l.createElement("div",{className:pt.allHeader},l.createElement(h,{elementType:"h5",variant:"title-04"},l.createElement(p,{id:"sng_fusion_list_filters_modal_header",args:{title:e}})," ")),z):l.createElement(A,{deprioritizeRef:T,slideFrom:"right",buttonStyle:"inline",header:l.createElement("div",{className:pt.whiteBackground},null!=e&&l.createElement("div",{className:pt.header},l.createElement(h,{elementType:"h4",variant:B?"title-05":"title-01"},l.createElement("span",{ref:R},e)))),primaryButton:l.createElement(F,{variant:"primary",size:"small",onClick:O},l.createElement(p,{id:"sng_fusion_list_filters_modal_apply"})," "),onClose:O,closeButtonPosition:"left",closeButtonIcon:se,heightOption:"full",widthOption:"full"},l.createElement(D,{ref:T,onChange:w,onClear:N,value:v,placeholder:W.string("sng_fusion_list_filters_modal_search_label",{title:P})}),null!=e&&l.createElement("div",{className:pt.allHeader,ref:C},l.createElement(h,{elementType:"h5",variant:"title-04"},l.createElement(p,{id:"sng_fusion_list_filters_modal_header",args:{title:e}})," ")),z)},gt=()=>l.createElement(l.Fragment,null,l.createElement(p,{id:"fusion_list_show_more_filters"}),l.createElement(h,{marginX:"spacing-02",variant:"button-01",display:"inline"},l.createElement(re,null))),bt=()=>l.createElement(l.Fragment,null,l.createElement(p,{id:"fusion_list_show_less_filters"}),l.createElement(h,{marginX:"spacing-02",variant:"button-01",display:"inline"},l.createElement(ne,null)));function ht({onClick:e,ariaContentId:t,expanded:a,disabled:r=!1}){return l.createElement(T,{disabled:r,variant:"accent",onClick:e,ariaAttributes:{"aria-expanded":a,"aria-controls":t}},l.createElement(h,{variant:"button-01"},a?l.createElement(bt,null):l.createElement(gt,null)))}var Et="ePIqi _A M0 P0 w f G K v",St=()=>{},_t=({ariaAttributes:e,trackingDetails:t,children:a,onClick:r,disabled:n})=>{var{trackClick:i}=b(t);return l.createElement(T,{disabled:n,variant:"accent",onClick:()=>{i(),r()},ariaAttributes:e},l.createElement(h,{variant:"button-01"},a))},yt=()=>l.createElement(p,{id:"fusion_list_show_all_filters"}),Ct=({parentKey:e,name:t,title:a,tooltip:r,children:i})=>{var{desktop:o}=n();return l.createElement(oe,{name:t,headerText:a,tooltip:r,isCollapsible:t!==x&&o,ariaLabelledBy:e},i)},Ft=({filterName:e,values:t,renderOption:a,onApply:r,hideAfter:n=-1,singleSelect:i=!1,disabled:o=!1})=>{var s=(t||[]).map((t=>({name:null!=t.filterName?t.filterName:e,value:t.value,selected:t.isSelected})));return l.createElement("ul",{className:c("rating"===e?[Et,"fhOtE"]:Et)},t.map(((t,u)=>l.createElement("li",{className:c({"eiPgd M0 f G":!0,eTAzN:n>0&&u>=n&&!t.isSelected}),key:t.value},a(t,(l=>{var a=ut(i?s.map((({name:e,value:t})=>({name:e,value:t,selected:!1}))):s,[{name:null!=t.filterName?t.filterName:e,value:t.value,selected:l,disabled:o}]);r(a)}))))))},kt=({parentKey:e,title:t,tooltip:a,filterName:r,values:n,viewMoreLimit:i=ge,renderOption:o,onApply:s,singleSelect:c,disabled:u=!1})=>{var m=n.map((e=>!0===e.isSelected)).lastIndexOf(!0)>i-1,[d,p]=l.useState(m),f=d?"showLessFilterOptions":"showMoreFilterOptions",{trackClick:v}=b({clientContext:f}),g=n.length>i,h=`${r}_filter_options`,E=l.createElement(Ft,{filterName:r,singleSelect:c,onApply:s,values:n,hideAfter:d?-1:i,renderOption:o,disabled:u}),S=g?l.createElement(ht,{disabled:u,expanded:d,ariaContentId:h,onClick:()=>{v(),p(!d)}}):null;return l.createElement(Ct,{name:r,title:t,tooltip:a,parentKey:e},E,S)},Tt=({singleSelect:e,parentKey:t,title:a,tooltip:r,filterName:n,values:i,onApply:o=St,renderOption:s,modalRenderOption:c,viewMoreLimit:u=ve,disabled:m=!1,mapSurface:d=!1})=>{var[p,f]=l.useState(!1),v=(i.length||0)>u,g=d?"mapFilter":"openFilterOptionsModal",b=d?"viewAll":null,h=`${n}_filter_modal`,E=l.useCallback((()=>{f(!1)}),[]),S=l.useCallback((e=>{o([...e])}),[o]),_=l.useCallback((e=>{S(e),E()}),[S,E]),[y,C]=[i.slice(0,u),i.slice(u,i.length)],F=C.filter((e=>e.isSelected)),k=C.some((e=>!e.isSelected)),T=l.createElement(Ft,{filterName:n,singleSelect:e,onApply:S,values:y.concat(F),renderOption:s,disabled:m}),x=v&&k?l.createElement(_t,{disabled:m,trackingDetails:{clientContext:g,clientParameter:b},onClick:()=>{p||f(!0)},ariaAttributes:{"aria-controls":h}},l.createElement(yt,null)):null,R=p&&i?l.createElement(fe,{values:i,singleSelect:e,popularChoiceDefinition:"multi",title:null!=a?a:"",name:n,onClose:E,onApply:_,renderOption:c||s,mapSurface:d}):null;return l.createElement(Ct,{name:n,title:a,tooltip:r,parentKey:t},T,x,R)},xt=({parentKey:e,title:t,tooltip:a,filterName:r,values:n,onClear:i,onApply:o,renderOption:s,modalRenderOption:c,singleSelect:u,viewMoreLimit:m=null,showModalLimit:d=null,disabled:p=!1,mapSurface:f=!1})=>{var[v,g]=mt(m,d);return(n||[]).length>g?l.createElement(Tt,{parentKey:e,filterName:r,title:t,tooltip:a,values:n,onClear:i,onApply:o,renderOption:s,modalRenderOption:c||s,viewMoreLimit:v,singleSelect:u,disabled:p,mapSurface:f}):l.createElement(kt,{parentKey:e,filterName:r,title:t,tooltip:a,values:n,onClear:i,onApply:o,renderOption:s,viewMoreLimit:v,singleSelect:u,disabled:p})},Rt=({object:e})=>{var t,l,a,r;if(e)switch(e.__typename){case"WebPresentation_LocationFilterValue":return(null==(t=e.location)||null==(l=t.names)?void 0:l.abbreviated)||null;case"WebPresentation_SimpleTextFilterValue":return e.localizedText;case"WebPresentation_TagFilterValue":return(null==(a=e.tag)?void 0:a.localizedName)||null;case"WebPresentation_TextFilterValue":return(null==(r=e.text)?void 0:r.text)||null;default:console.error("Unsupported type",e.__typename)}return null},Pt=({filterValue:e,validated:t=!1})=>{var a,r,n,o,{localize:s}=f(),{object:c}=e,u=null;if(c){switch(c.__typename){case"WebPresentation_BubbleRatingFilterValue":c.minimumRatingValue&&(u=c.minimumRatingValue<50?l.createElement(z,{rating:c.minimumRatingValue/10,label:l.createElement(h,{elementType:"span",variant:"body-01"},` ${s.string("ampersand_up")}`)}):l.createElement($,{rating:c.minimumRatingValue/10}));break;case"WebPresentation_LocationFilterValue":u=(null==(a=c.location)||null==(r=a.names)?void 0:r.abbreviated)||null;break;case"WebPresentation_SimpleTextFilterValue":u=c.localizedText;break;case"WebPresentation_TagFilterValue":u=(null==(n=c.tag)?void 0:n.localizedName)||null;break;case"WebPresentation_TextFilterValue":u=(null==(o=c.text)?void 0:o.text)||null;break;default:console.error("Unsupported type",c.__typename)}t&&null===u&&e.value&&(u=e.value)}return null===u&&(u=l.createElement(i,{message:`Empty filterValue ${e.value}`})),u},wt=({model:e,clientContext:t,clientParameter:l})=>{var{trackClick:r}=b({clientContext:t,clientParameter:l});return null!=e?a.createElement("span",{className:"cJVej"},a.createElement(K,{model:e,onShowTooltip:r})):null},Nt=({model:e})=>a.createElement(wt,{model:e,clientContext:"showFilterTooltip"}),Wt=({model:e,value:t})=>a.createElement(wt,{model:e,clientContext:"showFilterValueTooltip",clientParameter:JSON.stringify({value:t})}),Lt=(e,t)=>(null==t?void 0:t.filter(Boolean).map((t=>({name:dt(t,e),value:t.value,selected:t.isSelected}))))||[],Mt=({name:e,value:t})=>`${e}-${t}`,Bt=({model:e,onFilterChange:t,onSetFilter:a,onClear:r,viewMoreLimit:n=null,disabled:i=!1,mapSurface:o=!1})=>{var s="leftRail"===l.useContext(me),[c,u]=mt(n),{title:m,name:d,values:p,tooltip:f}=e,v=l.useCallback((e=>{a?a(ut(Lt(d,p),e).filter((e=>e.selected)).map((e=>e.value))):t&&t(((e,t)=>{var l=new Map;e.forEach((e=>l.set(Mt(e),e.selected)));var a=new Map;t.forEach((e=>{var t=Mt(e);l.has(t)||a.set(t,e.selected),l.get(t)!==e.selected&&a.set(t,e.selected)}));var r=new Map;return Array.from(a.entries()).forEach((([e,t])=>{var l,[a,n]=e.split("-");r.has(a)||r.set(a,[]),null==(l=r.get(a))||l.push({value:n,selected:t})})),[...r.entries()].map((([e,t])=>({id:e,selected:t.filter((({selected:e})=>e)).map((({value:e})=>e)),deselected:t.filter((({selected:e})=>!e)).map((({value:e})=>e))})))})(Lt(d,p),e))}),[a,t,p,d]),g=l.useCallback((e=>function(t,a){var r,n=s?ee:te,o=i||!t.isSelected&&0===t.count,c=null!==t.tooltip?l.createElement(Wt,{model:t.tooltip,value:t.value}):null;return l.createElement(l.Fragment,null,l.createElement(n,{id:`${e}_${d}_${t.value}`,typename:null==(r=t.object)?void 0:r.__typename,selected:t.isSelected,disabled:o,onSelect:a,value:t.value},l.createElement(Pt,{filterValue:t,validated:!0}),s&&c),!s&&l.createElement("div",{className:"brJcL"},c))}),[s,d,i]),b=l.useMemo((()=>g("main")),[g]),h=l.useMemo((()=>g("modal")),[g]);if(!p)return null;var E=(p||[]).filter(Boolean);return 0===E.length?null:l.createElement(be,{title:m,tooltip:l.createElement(he,{model:f}),filterName:d,values:E,onApply:v,onClear:r,viewMoreLimit:c,showModalLimit:u,renderOption:b,modalRenderOption:h,singleSelect:!1,disabled:i,mapSurface:o})},Ot=({model:e,setFilter:t,disabled:a=!1,mapSurface:r=!1})=>{var{values:n}=e,o=l.useCallback((e=>{t&&t([...e])}),[t]),s=l.useCallback((()=>{t&&t([])}),[t]);return e.__typename?n&&l.createElement(Ee,{disabled:a,model:e,onSetFilter:o,onClear:s,mapSurface:r}):l.createElement(i,{message:"empty model in MultiSelectFilterWrapper"})},Vt=({model:e,setFilter:t})=>{var a,r,{name:i,selectedRangeStart:o,selectedRangeEnd:s,buckets:c,title:u,tooltip:m}=e,d=(null==c?void 0:c.length)||0,{desktop:p}=n(),f=l.useCallback(((e,l)=>{t&&t([e.toString(),l.toString()])}),[t]);return l.createElement(oe,{headerText:u,tooltip:l.createElement(he,{model:m}),name:i,isCollapsible:p},l.createElement(j,{min:(null==c||null==(a=c[0])?void 0:a.rangeStart)||0,minHandleData:{currentValue:o||0,valueDescription:""},max:(null==c||null==(r=c[d-1])?void 0:r.rangeEnd)||0,maxHandleData:{currentValue:s||0,valueDescription:""},currentRangeLabel:null,step:1,onChange:f}))},Gt=({minPrice:e,maxPrice:t,selectedMin:a,selectedMax:r,onChange:n,onRelease:i,disabled:o=!1})=>{var{localize:s}=f(),c=v(),u=c.formatCurrencyInteger(a),m=r>=t?s.string("price_slider_plus_short",{0:c.formatCurrencyInteger(t)}):c.formatCurrencyInteger(r);return l.createElement("div",{className:"fasko w"},l.createElement(j,{disabled:o,min:e,minHandleData:{currentValue:a,valueDescription:s.string("sng_a11y_min_price")},max:t,maxHandleData:{currentValue:r,valueDescription:s.string("sng_a11y_max_price")},currentRangeLabel:`${u} - ${m}`,step:5,onChange:n,onRelease:i}))},At=[],It=({model:e,setFilter:t,disabled:a=!1})=>{var r,i,o,{name:s,minValue:c,maxValue:u,selectedRangeStart:m,selectedRangeEnd:d,title:f,modes:v,tooltip:g}=e,{trackClick:h}=b(),[{min:E,max:S},_]=l.useState({min:m,max:d}),y=(null==v?void 0:v.filter(Boolean))||At,C=null==y||null==(r=y.filter((({isSelected:e})=>e)))||null==(i=r[0])?void 0:i.value,F=null==y||null==(o=y[0])?void 0:o.value,[k,T]=l.useState(C),[{page:x}]=l.useContext(M),R=l.useMemo((()=>/(hotel|lastminute|showuserreviews|smartdeals)/i.test(x)),[x]),{desktop:P}=n(),w=l.useCallback(((e,t)=>{t-e>=5&&_({min:e,max:t})}),[]),N=l.useCallback(((e,l,a)=>{if(t){var r=null!=a&&a!==F,n=e!==c||l!==u;if(n||r)if(!n&&r)t([a].filter(Boolean));else{var i=R?"-1":null;t([null==e?void 0:e.toString(),l!==u?null==l?void 0:l.toString():i,r?a:null].filter(Boolean))}else t([])}}),[t,c,u,F,R]),W=l.useCallback((()=>{null!=E&&null!=S&&N(E,S,k)}),[N,E,S,k]),L=l.useCallback((e=>{k!==e&&(T(e),N(null,null,e))}),[N,k]),B=l.useCallback((()=>{h({clientContext:"openPricingModeModal"})}),[h]),O=l.useCallback((()=>{h({clientContext:"openPricingModeTooltip"})}),[h]);l.useEffect((()=>{_({min:m,max:d})}),[m,d]),l.useEffect((()=>{T(C)}),[C]);var V=l.useMemo((()=>y.map((e=>({value:e.value,displayName:Rt(e)||""})))||[]),[y]),G=l.useMemo((()=>y.map((e=>{var{tooltip:t}=e;if(null==t)return null;var a=Rt(e);return null==a?null:{label:a,text:l.createElement(U,{model:t.popUpText})}})).filter(Boolean)),[y]);return l.createElement(oe,{headerText:f,name:s,tooltip:l.createElement(he,{model:g}),isCollapsible:P},l.createElement(ye,{minPrice:c||0,maxPrice:u||0,selectedMin:E||0,selectedMax:-1===S?u||0:S||0,onChange:w,onRelease:W,disabled:a}),V.length>0&&l.createElement("div",{className:"gaGBb A u"},l.createElement(H,{options:V,value:null!=k?k:F,onChange:L,label:l.createElement(p,{id:"hotels_filter_title_pricing_mode"}),onOpen:B,fullscreenMobile:!0,"aria-describedby":"priceModeTooltip",disabled:a}),G.length>0?l.createElement(X,{content:G,onOpen:O}):null))},Dt=({id:e,value:t,children:a,selected:r,disabled:n,onSelect:i})=>l.createElement(S,{id:e,value:t,selected:r,disabled:n,onSelect:()=>{i(!r)},label:a,variant:"trail"}),zt=({selected:e,onSelect:t,children:a,disabled:r=!1})=>l.createElement(T,{disabled:r,variant:"primary",onClick:()=>{e||t(!0)}},l.createElement("div",{className:"fDDET f u G"},l.createElement(h,{variant:e?"button-01":"body-01"},a))),$t=({children:e,isSelected:t,onClick:a,href:r,disabled:n=!1,allowDeselect:i=!1,hidden:o=!1})=>{var s=l.createElement(h,{variant:t?"title-05":"body-01"},e),u=i?"a":"span";return l.createElement("div",{className:c("bDzhD P0 f u G",{dsTzI:n,cxmmS:o})},t?l.createElement(u,{href:i?r:void 0,onClick:a,className:c({bKSVz:t,"cGyUW _S":i})},s):l.createElement("a",{className:"fkyaM",onClick:a,href:r},s))},Kt=({model:e},t=!1,a=!1,r=!1)=>{var{isLeftRail:n,name:i,variant:o}=e;return function(e,s){var c;if("text"===o&&n)return l.createElement(Te,{allowDeselect:a,disabled:r,isSelected:e.isSelected,onClick:()=>{e.isSelected&&!a||s(!e.isSelected)}},l.createElement(Pt,{filterValue:e,validated:!0}));var u=Fe;return"checkbox"===o&&(u=ee),"text"===o&&(u=t?te:ke),n||(u=te),l.createElement(u,{id:`${i}_${e.value}`,typename:null==(c=e.object)?void 0:c.__typename,value:e.value,selected:e.isSelected,disabled:r||!e.isSelected&&0===e.count,onSelect:e=>{(e||a)&&s(e)}},l.createElement(Pt,{filterValue:e,validated:!0}))}},jt=({name:e,title:t,tooltip:a,values:r,variant:i="checkbox",onSelection:o,onClear:s,viewMoreLimit:c=null,viewModalLimit:u=null,allowDeselect:m=!1,limitToSelectedValue:d=!0,disabled:p=!1,mapSurface:f=!1})=>{var{desktop:v}=n(),g="leftRail"===l.useContext(me),b=`filter-singleSelect-${e}`,[h,E]=mt(c,u),S=l.useCallback((e=>{var t=e.find((e=>e.selected));null!=t&&t.selected?o(t.value):d||"checkbox"===i||m?o(null):console.error("Unsetting a single select should not happen")}),[o,d,i,m]);if(null==r)return null;var y=r.filter(Boolean);if(d){var C=y.find((e=>!0===e.isSelected));null!=C&&(y=[C])}if(0===y.length)return null;var F={model:{variant:i,title:t,name:e,onSelection:o,isDesktop:v,isLeftRail:g,ariaLabelledBy:b}},k=Kt(F,!1,m||"checkbox"===i,p),T=Kt(F,!0,m||"checkbox"===i,p),x=l.createElement(be,{parentKey:b,title:t,tooltip:a,filterName:e,values:y,viewMoreLimit:h,showModalLimit:E,renderOption:k,modalRenderOption:T,onApply:S,onClear:s,disabled:p,singleSelect:!0,mapSurface:f});return x&&"radio"===i?l.createElement(_,{name:e},x):x},Ht=({onSelection:e,fixedUpValues:t,getHref:a,disabled:r=!1,hideAfter:n=-1})=>{var i=t.map(((t,i)=>l.createElement(Te,{isSelected:t.isSelected,href:a(t),key:t.value,onClick:l=>{t.isSelected||e(t.value),l.stopPropagation(),l.preventDefault()},disabled:r,hidden:n>0&&i>=n&&!t.isSelected},l.createElement(Pt,{filterValue:t}))));return l.createElement("div",null,i)},Ut=e=>{switch(e){case"category":return 4;case"navbar":return 20;default:return 6}},Xt=({title:e,tooltip:t,name:a,values:n,onSelection:i,viewMoreLimit:o=6,disabled:s=!1})=>{var c=(n||[]).filter(Boolean),u=m(),d=u||c.map((e=>!0===e.isSelected)).lastIndexOf(!0)>o-1,[p,f]=l.useState(d),{trackClick:v}=b({clientContext:p?"showLessFilterOptions":"showMoreFilterOptions"}),g=u&&c.length>o,h=-1;g&&!p&&(h=o);var E=`filter-${a}`,S=g?l.createElement(ht,{expanded:p,disabled:s,ariaContentId:E,onClick:()=>{v(),f(!p)}}):null,_=l.useCallback((e=>{var t;if(e.link){var{url:l}=Y(e.link);t=l}return t||`#${a}=${e.value}`}),[a]);return l.createElement(oe,{name:a,isCollapsible:!1,headerText:e,tooltip:t},l.createElement("div",{id:E},l.createElement(r,{variant:"stack",gap:"standard"},l.createElement(Re,{disabled:s,fixedUpValues:c,hideAfter:h,onSelection:i,getHref:_}),S&&l.createElement("div",null,S))))},Yt=({title:e,name:t,tooltip:a,values:r,onSelection:n,onClear:i,viewMoreLimit:o,disabled:s=!1,mapSurface:c=!1})=>l.createElement(xe,{title:e,tooltip:a,name:t,values:r,limitToSelectedValue:!1,viewMoreLimit:o,onSelection:n,allowDeselect:!1,onClear:i,disabled:s,mapSurface:c}),qt=({title:e,tooltip:t,name:a,values:r,onSelection:n,onClear:i,disabled:o=!1,mapSurface:s=!1})=>{var c="leftRail"===l.useContext(me);return 0===r.filter(Boolean).length?null:c?l.createElement(Xt,{title:e,tooltip:t,name:a,values:r,variant:"text",onSelection:n,onClear:i,viewMoreLimit:6,disabled:o}):l.createElement(Yt,{title:e,tooltip:t,name:a,values:r,variant:"text",onSelection:n,onClear:i,viewMoreLimit:Ut(a),disabled:o,mapSurface:s})},Jt=[],Qt=({model:e,setFilter:t,disabled:a=!1,mapSurface:r=!1,contentType:n})=>{var{title:i,name:o,values:s,tooltip:c}=e,u=l.useCallback((()=>{t&&t([])}),[t]),m=l.useCallback((e=>{t&&t(null!=e?[e]:[])}),[t]),d=l.createElement(he,{model:c});return"rating"===e.name?l.createElement(xe,{title:i||"",tooltip:d,name:o,values:s||Jt,onSelection:m,onClear:u,viewMoreLimit:5,limitToSelectedValue:!1,disabled:a,allowDeselect:!0,mapSurface:r}):((e,t)=>(t===R||t===P)&&e===w)(e.name,n)?l.createElement(Pe,{title:i||"",tooltip:d,name:o,values:s||Jt,onSelection:m,onClear:u,disabled:a,mapSurface:r}):l.createElement(xe,{title:i||"",tooltip:d,name:o,values:s||Jt,onSelection:m,onClear:u,disabled:a,limitToSelectedValue:!1,allowDeselect:!0,mapSurface:r})},Zt=({model:e,onChange:t,disabled:a=!1})=>{var{values:r}=e,n=l.useCallback((e=>{t&&t(e)}),[t]),o=l.useCallback((()=>{if(t){var e=new Map;null==r||r.filter(Boolean).forEach((({filterName:t,value:l,isSelected:a})=>{var r;a&&(e.has(t)||e.set(t,[]),null==(r=e.get(t))||r.push(l))}));var l=[];Array.from(e.entries()).forEach((([e,t])=>null!=e&&l.push({id:e,deselected:t}))),t(l)}}),[t,r]);return e.__typename?r&&l.createElement(Ee,{disabled:a,model:e,onFilterChange:n,onClear:o}):l.createElement(i,{message:"empty model in ReferenceFilterWrapper"})},el=({model:e,setFilter:t,disabled:a=!1})=>l.createElement(l.Fragment,null,l.createElement(T,{disabled:a,onClick:()=>{null!=t&&t([null==e.value?Ke:e.value])}},e.title),l.createElement(he,{model:e.tooltip})),tl=()=>{},ll=[],al=({model:e,setFilter:t,disabled:a=!1})=>{var{name:n,title:i,locations:o,minDistance:s,maxDistance:c,selectedDistance:u,unitFormat:m,tooltip:d}=e,p=null!=s?s:0,v=null!=c?c:0,{localize:g}=f(),b=l.useCallback((({max:e})=>{var t;return(null==m||null==(t=m.text)?void 0:t.replace("{0}",`${Math.min(null!=e?e:v,v)}`))||""}),[m,v]),h=l.useCallback((()=>{t&&t([])}),[t]),E=l.useCallback(((e,l)=>{null!=t&&null!=e&&null!=l&&t([e,`${l}`])}),[t]),S=null!=u?u:v,[_,y]=l.useState(S),C=l.useCallback(((e,t)=>{t>=1&&y(t)}),[]),F=null==o?void 0:o.filter(Boolean).filter((({isSelected:e})=>e)).map((({value:e})=>e))[0],[k,T]=l.useState(F),x=l.useCallback((()=>E(k,_)),[E,k,_]),R=l.useCallback((e=>{null===e?h():(T(e),E(e,_))}),[E,_,h]);return l.useEffect((()=>{T(F)}),[F]),l.useEffect((()=>{y(S)}),[S]),l.createElement(oe,{name:n,headerText:i,tooltip:l.createElement(he,{model:d}),isCollapsible:!0},l.createElement(r,{gap:"gapless"},l.createElement(j,{disabled:a,min:p,max:v,maxHandleData:{currentValue:null!=_?_:v,valueDescription:g.string("sng_a11y_max_distance")},currentRangeLabel:b({max:_}),step:1,onChange:C,onRelease:x}),l.createElement(xe,{disabled:a,title:null,tooltip:null,name:n,values:o||ll,variant:"text",onSelection:R,onClear:tl,limitToSelectedValue:!1,viewModalLimit:8,allowDeselect:!0})))},rl=({model:e,setFilter:t,disabled:a=!1})=>{var{name:r,title:n,values:i,tooltip:o}=e,s=l.useCallback((()=>{t&&t([])}),[t]),c=l.useCallback((e=>{t&&t(null!=e?[e]:[])}),[t]),u=l.createElement(he,{model:o});return l.createElement(Pe,{title:n||"",tooltip:u,name:r,values:i||[],onSelection:c,onClear:s,disabled:a})},nl=({model:e,onChange:t,setFilter:a,disabled:r=!1,mapSurface:n=!1,contentType:i})=>{switch(e.__typename){case"WebPresentation_WebNavigationLinkFilter":return l.createElement(Me,{disabled:r,model:e,setFilter:a});case"WebPresentation_EnumeratedValueFilter":return l.createElement(we,{disabled:r,model:e,setFilter:a,mapSurface:n,contentType:i});case"WebPresentation_MultiValueFilter":return l.createElement(Se,{disabled:r,model:e,setFilter:a,mapSurface:n});case"WebPresentation_RangedValueFilter":return l.createElement(_e,{disabled:r,model:e,setFilter:a});case"WebPresentation_RangedSliderFilter":return l.createElement(Ce,{disabled:r,model:e,setFilter:a});case"WebPresentation_DistanceFromFilter":return l.createElement(Le,{disabled:r,model:e,setFilter:a});case"WebPresentation_SingleButtonFilter":return l.createElement(We,{disabled:r,model:e,setFilter:a});case"WebPresentation_ReferenceFilter":return l.createElement(Ne,{disabled:r,model:e,onChange:t});default:return l.createElement(s,{typename:e.__typename})}},il=({model:e,header:t,onChange:a,disabled:n=!1,mapSurface:i=!1,contentType:o})=>{var{trackClick:s}=b(),c=e=>{a&&a(e)},u=l.useMemo((()=>e.filter(Boolean)),[e]);return u&&u.length>0?l.createElement(r,{variant:"stack",gap:"wide"},t,u.map((e=>{return l.createElement("div",{key:{name:"",...e}.name,className:"bLguV _T _R"},l.createElement(nl,{disabled:n,onChange:c,setFilter:(t=e.name,a=e.trackingKey,r=e.trackingTitle,e=>{if(i){var l={clientContext:je.mapFilter.clientContext,clientParameter:null!=e&&e.length>0?je.mapFilterFilterSelect.clientParameter:je.mapFilterFilterDeselect.clientParameter,trackingKey:a,trackingTitle:r};s(l)}c([{id:t,value:e}])}),model:e,mapSurface:i,contentType:o}));var t,a,r})),0===u.length&&l.createElement(p,{id:"fusion_list_page_filter_no_filters"})):null},ol=e=>{var t=0;return e.filter(Boolean).forEach((e=>{switch(e.__typename){case"WebPresentation_EnumeratedValueFilter":case"WebPresentation_MultiValueFilter":e.values&&(t+=e.values.map((e=>e&&e.isSelected?1:0)).reduce(((e,t)=>e+t),0));break;case"WebPresentation_RangedValueFilter":null===e.selectedRangeStart&&null===e.selectedRangeEnd||t++}})),t},sl=(e,t)=>[...new Set([...e||[],...t||[]])],cl=(e,t)=>e.filter((e=>!(null!=t&&t.includes(e)))),ul=e=>"WebPresentation_WebNavigationFilterGroup"===e.__typename?1:0,ml=e=>ol([...(e||[]).filter(Boolean)])>0;function dl(e,t,l=!1){return!!t&&(!l||e!==R&&e!==P?t.filter(Boolean).length>0:t.filter(Boolean).filter((e=>null!=e.id&&!Oe.has(e.id))).length>0)}var pl=e=>[...e||[]].filter(Boolean).map((({id:e,value:t})=>{if(null==e||null==t)return null;var l=[...t].filter(Boolean);return 0===l.length?null:{id:e,value:Ve.has(e)?l:l.sort()}})).filter(Boolean).sort(((e,t)=>(e.id||"")>(t.id||"")?1:-1)),fl=e=>{var t;if(e)switch(e.__typename){case"WebPresentation_RangedSliderFilter":return(e=>{var t,l,a,r,n=null==(t=e.modes)||null==(l=t.filter((e=>null==e?void 0:e.isSelected))[0])?void 0:l.value,i=null!=n&&!(null!=(a=e.modes)&&null!=(r=a[0])&&r.isSelected),o=null!==e.selectedRangeStart&&null!==e.selectedRangeEnd&&(e.selectedRangeStart!==e.minValue||e.selectedRangeEnd!==e.maxValue);return o||i?!o&&i&&null!=n?{id:e.name,value:[n]}:o&&!i?{id:e.name,value:[String(e.selectedRangeStart),String(e.selectedRangeEnd)]}:o&&i&&null!=n?{id:e.name,value:[String(e.selectedRangeStart),String(e.selectedRangeEnd),n]}:null:null})(e);case"WebPresentation_RangedValueFilter":return null!=e.selectedRangeStart&&null!=e.selectedRangeEnd?{id:e.name,value:[String(e.selectedRangeStart),String(e.selectedRangeEnd)]}:null;case"WebPresentation_MultiValueFilter":case"WebPresentation_EnumeratedValueFilter":case"WebPresentation_WebNavigationLinkFilter":return(t={id:e.name,value:(e.values||[]).filter(Boolean).filter((e=>e.value&&e.isSelected)).map((e=>e.value)).filter(Boolean).reduce(((e,t)=>[...e,t]),[])})&&t.value.length>0?t:null;case"WebPresentation_ReferenceFilter":default:return null}return null},vl=e=>e.flatMap((e=>(e=>{switch(e.__typename){case"WebPresentation_StandardFilterGroup":case"WebPresentation_StandardFilterGroupWebOnly":return e.filters||[];case"WebPresentation_SingleSelectFilterGroup":case"WebPresentation_WebNavigationFilterGroup":return e.filter?[e.filter]:[];default:return e.__typename,[]}})(e).map(fl).filter(Boolean))),gl=(e,t,l,a=!1)=>{var r=vl(t);e.filter((e=>!r.filter((t=>{return a=e,(l=t).id===a.id&&l.value.length===a.value.length&&l.value.every((e=>a.value.includes(e)));var l,a})).length)).forEach((e=>{t.forEach((t=>{var r,n=null==(r=(e=>{switch(e.__typename){case"WebPresentation_WebNavigationFilterGroup":case"WebPresentation_SingleSelectFilterGroup":return[e.filter];default:return e.filters}})(t))?void 0:r.filter((t=>(null==t?void 0:t.name)===e.id));null==n||n.forEach((t=>l({trackingKey:null==t?void 0:t.trackingKey,trackingTitle:null==t?void 0:t.trackingTitle,clientContext:a?"mapFilterApply":"setFilter",clientParameter:JSON.stringify(e.value)})))}))}))},bl=e=>e&&null!=e.id&&""!==e.id?{id:e.id,value:(e.value||[]).filter(Boolean)}:null,hl=(e,t)=>{return[...new Map((l=[...e,...t],l.filter(Boolean).map(bl).filter(Boolean)).map((e=>[e.id,e]))).values()].filter((({value:e})=>null!=e&&0!==e.length&&e[0]!==Ke));var l},El=(e,t)=>l.useMemo((()=>((e,t)=>e.map((e=>{if("WebPresentation_SingleSelectFilterGroup"===e.__typename||"WebPresentation_WebNavigationFilterGroup"===e.__typename)return e.filter&&q(e.filter.surfaces,t)?e:null;var l=((e,t)=>(e||[]).filter(Boolean).filter((e=>q(e.surfaces,t))))(e.filters,t);return 0!==l.length?{...e,filters:l}:null})).filter(Boolean))((e||[]).filter(Boolean),t)),[e,t]),Sl=e=>{switch(e.__typename){case"WebPresentation_StandardFilterGroup":case"WebPresentation_StandardFilterGroupWebOnly":return e.filters||[];case"WebPresentation_SingleSelectFilterGroup":case"WebPresentation_WebNavigationFilterGroup":return[e.filter].filter(Boolean);default:return console.error("Unknown filter group type",e.__typename),[]}},_l=(e,t)=>{var l=new Map;return e.forEach((e=>l.set(e.id,e))),t.forEach((e=>{var t=l.has(e.id)?l.get(e.id):{id:e.id,value:e.value},a=((e,t,l,a)=>{var r=new Set(t||e||[]);return null==l||l.forEach((e=>r.add(e))),null==a||a.forEach((e=>r.delete(e))),Array.from(r.keys())})(null==t?void 0:t.value,e.value,e.selected,e.deselected);l.set(e.id,{id:e.id,value:a})})),Array.from(l.entries()).map((([,e])=>e))},yl=(e,t)=>{var l=[...e,...t],a=new Map;return l.forEach((e=>{var t,l,r=a.get(e.id);a.set(e.id,null!=r?(l=e,{id:(t=r).id,selected:cl(sl(t.selected,l.selected),l.deselected),deselected:cl(sl(t.deselected,l.deselected),l.selected),value:null!=l.value?l.value:t.value}):e)})),Array.from(a.entries()).map((([,e])=>e))},Cl=[],Fl=(e,t,l)=>{var a=null!=t?_l([],t):null;if(a&&"HotelsFusion"!==l){if(e){var r,n;switch(e.__typename){case"WebPresentation_StandardFilterGroup":n=Z.fromFilterInputSet(a,"merge").mergeStandardFilterGroup(e);break;case"WebPresentation_StandardFilterGroupWebOnly":n=Z.fromFilterInputSet(a,"merge").mergeStandardFilterGroupWebOnly(e);break;default:console.error("[Fusion] unknown filter group type",e.__typename)}if(null!=(r=n)&&r.filters)return n.filters}}else if(null!=e&&e.filters)return e.filters;return Cl},kl=({filterGroup:e,onApply:t,disabled:a,webVariant:r,contentType:n})=>{var[i,o]=l.useState(null),s=d();l.useEffect((()=>{o((e=>null))}),[e]),l.useEffect((()=>{var e;return i&&(a?o(null):e=setTimeout((()=>{t(i),o(null)}),1)),()=>{e&&clearTimeout(e)}}),[i,t,a]);var u=l.useCallback((e=>{a||o((t=>yl(t||[],e)))}),[a]),m=l.useMemo((()=>Fl(e,i,r)),[e,i,r]);return l.createElement("div",{className:c({dejit:!0,fsHpo:s})},l.createElement(Be,{model:m,onChange:u,disabled:a||!s,contentType:n}))},Tl=({filterGroup:e,onApply:t,disabled:a,contentType:r})=>{var n=l.useCallback((e=>{e&&!a&&t(_l([],e))}),[t,a]),i=l.useMemo((()=>Sl(e)),[e]);return l.createElement(Be,{disabled:a,key:`filter-group-${null===e.name?"no-name":e.name}`,model:i,onChange:n,contentType:r})},xl=({filterGroups:e,onUpdate:t,disabled:a=!1,webVariant:n,contentType:i})=>{var[o,c]=l.useState(!1),[u,m]=l.useState(vl(e)),d=l.useCallback((e=>{e&&(o||(c(!0),t(_l(u,e))))}),[o,t,u]);if(l.useEffect((()=>{c(!1),m(vl(e))}),[e]),l.useEffect((()=>{var e;return o&&(e=setTimeout((()=>{c(!1)}),3e4)),()=>{e&&clearTimeout(e)}}),[o]),0===e.length)return null;var p=[...e];return p.sort(((e,t)=>ul(t)-ul(e))),l.createElement("div",{style:{userSelect:"none"}},l.createElement(me.Provider,{value:"leftRail"},l.createElement(r,{variant:"stack",gap:"wide"},p.filter(Boolean).map(((e,t)=>{var r=null!=e.name?e.name:`${e.__typename}-${t}`;switch(e.__typename){case"WebPresentation_SingleSelectFilterGroup":case"WebPresentation_WebNavigationFilterGroup":return l.createElement(Ae,{key:r,disabled:o||a,filterGroup:e,onApply:d,contentType:i});case"WebPresentation_StandardFilterGroup":case"WebPresentation_StandardFilterGroupWebOnly":return l.createElement(Ge,{key:r,disabled:o||a,filterGroup:e,onApply:d,webVariant:n,contentType:i});default:return l.createElement(s,{key:r,typename:e.__typename})}})))))},Rl="cEfLj f e z",Pl="eXadl F1",wl=({title:e,children:t,isOpen:a=!1,slideIn:r=!0,onClose:n,onApply:i,onReset:o})=>{if(!a)return null;var s=l.createElement(F,{variant:"primary",size:"small",onClick:i},l.createElement(p,{id:"sng_fusion_list_filters_modal_apply"})," "),c=null!=o?l.createElement(T,{onClick:o},l.createElement(p,{id:"sng_fusion_list_filters_modal_reset"})," "):void 0;return r?l.createElement(A,{header:e,slideFrom:"bottom",heightOption:"full",widthOption:"full",onClose:n,primaryButton:s,secondaryButton:c},l.createElement("div",{className:Rl},l.createElement("div",{className:Pl},t))):l.createElement(I,{variant:"fixed-height-sticky-footer",title:e,widthOption:"fixed-60",heightOption:"fixed-80",onClose:n,primaryButton:s,secondaryButton:c},l.createElement("div",{className:Rl},l.createElement("div",{className:Pl},t)))},Nl=()=>{},Wl=({filterGroup:e,onApply:t=Nl,onReset:a=Nl,webVariant:r,mapSurface:i=!1,contentType:o,disabled:s=!1})=>{var[c,u]=l.useState(!1),[m,d]=l.useState(null),{trackClick:v}=b(),{localize:h}=f(),E=l.useCallback((()=>{u(!1),d(null)}),[u]),S=l.useCallback((e=>{d((t=>yl(t||[],e)))}),[]),_=l.useCallback((()=>{m&&t(_l([],m)),d(null),u(!1)}),[m,t]),y=l.useCallback((()=>{var t=i?je.mapFilterEnterClick.clientContext:"openFilterPill",l=i?je.mapFilterEnterClick.clientParameter:e.name;v({clientContext:t,clientParameter:l}),u(!0)}),[e.name,v,i]),F=l.useCallback((()=>{d(null),a(),u(!1)}),[u,d,a]),k=l.useMemo((()=>Fl(e,m,r)),[e,m,r]),{tabletOrSmaller:T}=n(),R=(e=>e===x?l.createElement(p,{id:"mobile_attraction_categories_filter"}):l.createElement(p,{id:"ta_filters"}))(e.groupType),P=null!==e.name?e.name:h.string("fusion_filters_title");null===e.name&&JSON.stringify(e.__typename);var w,N=e.filters?(w=e.filters,ol([...w])):0,W=0===N?P:l.createElement(g,{id:"filter.chip.name.count",args:{text:P,count:N}});return l.createElement(l.Fragment,{key:e.name},l.createElement(C,{disabled:s,"aria-label":e.groupType,selected:ml(e.filters),onClick:y,margin:"spacing-01"},W),l.createElement(Ie,{isOpen:c,title:R,onClose:E,onApply:_,onReset:F,slideIn:T},l.createElement(Be,{key:`filter-group-${null===e.name?"no-name":e.name}`,model:k,onChange:S,mapSurface:i,contentType:o})))},Ll=()=>{},Ml=({filterGroup:e,onApply:t=Ll,mapSurface:a=!1,contentType:r,disabled:i=!1})=>{var o,[s,c]=l.useState(!1),{trackClick:u}=b(),m=l.useCallback((()=>{var t=a?je.mapCardCategoryClick.clientContext:"openFilterPill",l=a?je.mapCardCategoryClick.clientParameter:e.name;u({clientContext:t,clientParameter:l}),c(!0)}),[u,e.name,a]),d=l.useCallback((()=>{c(!1)}),[c]),p=l.useCallback((e=>{e&&t(_l([],e)),c(!1)}),[t]),{tabletOrSmaller:f}=n(),v=Sl(e);if(s){var g=l.createElement(Be,{key:`filter-group-${null===e.name?"no-name":e.name}`,model:v,onChange:p,mapSurface:a,contentType:r});o=f?l.createElement(A,{heightOption:"full",widthOption:"full",slideFrom:"bottom",onClose:d},g):l.createElement(I,{variant:"fixed-height-sticky-footer",widthOption:"fixed-40",heightOption:"restricted",onClose:d},g)}return l.createElement(l.Fragment,{key:e.name},l.createElement(C,{disabled:i,"aria-label":e.groupType,selected:ml(v),onClick:m,margin:"spacing-01",icon:s?ne:re,iconPosition:"trailing"},e.name),o)},Bl=()=>{},Ol=({filterGroup:e,onApply:t=Bl,onReset:a=Bl,webVariant:r,mapSurface:n=!1,contentType:i,disabled:o=!1})=>{var{trackClick:c}=b();switch(e.__typename){case"WebPresentation_WebNavigationFilterGroup":case"WebPresentation_SingleSelectFilterGroup":return l.createElement(ze,{filterGroup:e,onApply:e=>{c({clientContext:"setFilters",clientParameter:JSON.stringify(e)}),t(e)},onReset:a,mapSurface:n,contentType:i,disabled:o});case"WebPresentation_StandardFilterGroup":return l.createElement(De,{filterGroup:e,onApply:t,onReset:a,webVariant:r,mapSurface:n,contentType:i,disabled:o});case"WebPresentation_StandardFilterGroupWebOnly":return null;default:return l.createElement(s,{typename:e.__typename})}},Vl=({filterGroups:e,onReset:t=Bl,onApply:a=Bl,mapSurface:r=!1,contentType:n,disabled:i=!1})=>{var o=vl(e),s=e=>{a(_l(o,e))};return l.createElement("div",{className:"bxtlP _W v u G"},e.map((e=>l.createElement(l.Fragment,{key:e.name},l.createElement(Ol,{filterGroup:e,onReset:t,onApply:s,mapSurface:r,contentType:n,disabled:i})))))},Gl=({filterGroups:e,onUpdate:t,contentType:a})=>{if(0===e.length)return null;var r=e.filter((e=>"WebPresentation_StandardFilterGroupWebOnly"===e.__typename)),n=vl(r),i=e=>{t(_l(n,e))},o=[...r];return o.sort(((e,t)=>ul(t)-ul(e))),l.createElement(l.Fragment,null,o.map((e=>l.createElement(Be,{key:`filter-group-${null==e.name?"no-name":e.name}`,model:Sl(e),onChange:i,contentType:a}))))};return e("hasFilters",dl),[()=>{ee=He,te=Ue,le={top:Ye("Top"),bottom:Ye("Bottom"),left:Ye("Left"),right:Ye("Right")},ae=Qe,re=Ze,ne=et,ie=rt,oe=st,se=ct,ce=[4,15],ue=[4,4],me=l.createContext("default"),de=`.${pt.searchable.replace(/\s+/g,".")}`,pe=new Set(["destinationGeo","type"]),fe=vt,ve=4,ge=4,be=xt,he=Nt,Ee=Bt,Se=o(Ot),_e=o(Vt),ye=Gt,Ce=o(It),Fe=Dt,ke=zt,Te=$t,xe=jt,Re=Ht,Pe=qt,we=o(Qt),Ne=o(Zt),We=o(el),Le=o(al),Me=o(rl),Be=il,J=class extends Set{addValueAt(e,t){var l=[...this];l[e]=t,this.reset(l)}addAll(e){e.forEach((e=>this.add(e)))}reset(e){this.clear(),e&&this.addAll(e)}get hasAny(){return this.size>0}export(){return[...this]}},Q=class{constructor(e){this.filters=new Map,e&&this.addInputs(e)}addInputs(e){e.filter(Boolean).forEach((e=>{this.addInput(e)}))}reset(e){this.filters.clear(),e&&this.addInputs(e)}addInput(e){var{id:t,value:l}=e;if(null!=t&&null!=l){var a=l.filter(Boolean);l.length!==a.length&&console.error("[Fusion] Input filter value contained nulls",t,l),this.getOrCreate(t).reset(a)}}getRange(e){var t=this.get(e);if(t&&t.size>=2){var[l,a]=[...t];if(null!=l&&null!=a){var r=Number(l),n=Number(a);if(!isNaN(r)&&!isNaN(n))return{rangeStart:r,rangeEnd:n};console.error("[Fusion] Range filter malformed, at least one part is NaN",e,l,a)}else console.error("[Fusion] Range filter malformed, at least one required part is null",e,l,a)}return null}getDistanceFrom(e){var t=this.get(e);if(t){var[l,a]=[...t];if(null!=l&&null!=a){var r=Number(a);if(!isNaN(r))return{distance:r,locationId:l};console.error("[Fusion] distance filter malformed",e,a)}}return null}getSelected(e,t){var l=this.get(e);return!!l&&l.has(t)}getOrCreate(e){var t=this.get(e);return t||(t=new J,this.filters.set(e,t)),t}get(e){return this.filters.get(e)||null}clearAll(){[...this.filters.values()].forEach((e=>e.clear()))}clear(e){this.getOrCreate(e).reset()}has(e){return this.filters.has(e)}hasAnyValues(e){var t=this.get(e);return!!t&&t.hasAny}get hasAny(){return this.filters.size>0}export(){return[...this.filters.entries()].map((([e,t])=>({id:e,value:t.export()})))}},e("RouteFilterMerger",Z=class e{constructor(e,t="overwrite"){this.routeFilters=void 0,this.mode=void 0,this.routeFilters=e,this.mode=t}get mergeMode(){return this.mode}reset(e){this.routeFilters=e||new Q([])}mergeModelFilters(e){return e?e.filter(Boolean).map((e=>this.mergeFilterGroup(e))):[]}mergeFilterGroupSelections(e){return this.mergeFilterGroup(e)}mergeFilterGroup(e){switch(e.__typename){case"WebPresentation_SingleSelectFilterGroup":return this.mergeSingleSelectFilterGroup(e);case"WebPresentation_StandardFilterGroup":return this.mergeStandardFilterGroup(e);case"WebPresentation_StandardFilterGroupWebOnly":return this.mergeStandardFilterGroupWebOnly(e);default:return console.error("[Fusion] unexpected filter group",e.__typename),e}}mergeFilters(e){return e?e.filter(Boolean).map((e=>this.mergeFilter(e))):e}mergeSingleSelectFilterGroup(e){return e.filter?{...e,filter:"navbar"!==e.filter.name?this.mergeEnumeratedValueFilter(e.filter):e.filter}:e}mergeStandardFilterGroup(e){return e.filters?{...e,filters:this.mergeFilters(e.filters.filter(Boolean))||null}:e}mergeStandardFilterGroupWebOnly(e){return e.filters?{...e,filters:this.mergeFilters(e.filters.filter(Boolean))||null}:e}mergeFilter(e){switch(e.__typename){case"WebPresentation_DistanceFromFilter":return this.mergeDistanceFromFilter(e);case"WebPresentation_EnumeratedValueFilter":return this.mergeEnumeratedValueFilter(e);case"WebPresentation_MultiValueFilter":return this.mergeMultiValueFilter(e);case"WebPresentation_RangedValueFilter":return console.error("[Fusion] WebPresentation_RangedValueFilter is deprecated"),e;case"WebPresentation_RangedSliderFilter":return this.mergeRangeSliderFilter(e);case"WebPresentation_ReferenceFilter":return this.mergeReferenceFilter(e);case"WebPresentation_SingleButtonFilter":return e;default:return console.error("[Fusion] unknown filter type",e.__typename),e}}mergeRangeSliderFilter(e){if(e.name){var t=this.routeFilters.getRange(e.name);if(t)return{...e,selectedRangeStart:t.rangeStart,selectedRangeEnd:t.rangeEnd}}return e}mergeDistanceFromFilter(e){if(e&&e.name&&e.locations){var t=this.routeFilters.getDistanceFrom(e.name);if(t){var{distance:l,locationId:a}=t;return{...e,selectedDistance:l,locations:(e.locations||[]).filter(Boolean).map((e=>({...e,isSelected:null!=e.value&&e.value===a})))}}}return e}isRouteValueSelected(e,t){return this.routeFilters.getOrCreate(e).has(t)}mergeSelectedState(e,t,l){var a=!1;switch(this.mode){case"blend":a=l||this.isRouteValueSelected(e,t);break;case"merge":a=this.routeFilters.has(e)?this.isRouteValueSelected(e,t):l;break;case"overwrite":default:a=this.isRouteValueSelected(e,t)}return a}mergeMultiValueFilter(e){return e.name&&e.values?{...e,values:(e.values||[]).filter(Boolean).map((t=>({...t,isSelected:this.mergeSelectedState(e.name,t.value,t.isSelected)})))}:e}mergeEnumeratedValueFilter(e){return e.name&&e.values?{...e,values:(e.values||[]).filter(Boolean).map((t=>({...t,isSelected:this.mergeSelectedState(e.name,t.value,t.isSelected)})))}:e}mergeReferenceFilter(e){return e.name&&e.values?{...e,values:(e.values||[]).filter(Boolean).filter((e=>null!=e.filterName)).map((e=>({...e,isSelected:this.mergeSelectedState(e.filterName||"",e.value,e.isSelected)})))}:e}static fromFilterInputSet(t,l="overwrite"){return new e(new Q(t),l)}}),Oe=new Set([N,$e]),Ve=new Set(["price","distFrom"]),Ge=kl,Ae=Tl,Ie=wl,De=Wl,ze=Ml,e({DesktopFiltersMemoized:l.memo(xl),FILTER_ATTRACTIONS_SUPPLIER_TOGGLE_ID:$e,FilterPillsMemoized:l.memo(Vl),MAP_TRACKING_ACTIONS:je,REMOVE_FLAG:Ke,RouteFilterMerger:Z,TourOperatorsMemoized:l.memo(Gl),hasFilters:dl,sanitizeFilters:pl,trackAppliedFilters:gl,unionFilters:hl,useFilterGroupsForSurface:El})},[e=>(l=e,a=e.default),e=>r=e.default,e=>(n=e.useViewportCategory,i=e.WPSUnexpected,o=e.fused,s=e.WPSUnsupportedType),e=>c=e.default,e=>(u=e.useClientSideLayoutEffect,m=e.useIsRobotSafe,d=e.useIsMounted),e=>(p=e.default,f=e.useLocalize,v=e.useIntlFormatter,g=e.UnsafeLocalize),e=>b=e.useFusionTracking,e=>h=e.default,e=>(E=e.Checkbox,S=e.RadioButton,_=e.RadioGroup),e=>(y=e.ChipInput,C=e.ChipButton),e=>(F=e.default,k=e.CircularButton,T=e.BorderlessButton),e=>(x=e.FILTER_ATTRACTIONS_L1_CATEGORY_ID,R=e.CONTENT_TYPE_ATTRACTION,P=e.CONTENT_TYPE_ATTRACTION_PRODUCT,w=e.FILTER_ATTRACTIONS_CATEGORY_ID,N=e.FILTER_ATTRACTIONS_ALL_ID),e=>W=e.default,e=>(L=e.Environment,M=e.Route),e=>B=e.HoverTooltip,e=>(O=e.KEY_UP,V=e.KEY_DOWN),e=>G=e.default,e=>(A=e.SlideInModal,I=e.Modal),e=>D=e.default,e=>(z=e.BubbleRatingWithLabel,$=e.BubbleRating),e=>K=e.Tooltip,e=>j=e.default,e=>H=e.DropdownMenu,e=>U=e.default,e=>X=e.default,e=>(Y=e.deriveLinkInfoFromInternalLink,q=e.isRenderableSurface)]]},["cDcdfi","87JRug","eGHhuQ","jSLlaY","4Z07E2","0DsHEV","BfEQXK","VP50Wc","MsxLpS","QLckY2","7yGKf-","L8Ny73","bOsokU","2R4xv2","4J6GHD","h7E4Ym","jaCyxS","E1X9WP","fZR2pj","MBK0so","6p--LX","F24sfv","MCrJhI","2dxA8m","wT5DgL","q-7VD4"]]);
