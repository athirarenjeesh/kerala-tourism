(this.$WP=this.$WP||[]).push(["tVuenP",(e,n)=>{"use strict";var t,a,r,u,s,i,l,o,c,d,b,p;function _(e,n){if(n.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function v(e){_(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(new Error).stack,new Date(NaN))}var E="cash_back_on_plus_1629228966",h="cash_back_on_plus_native_1632146213",m="plus_bundling_1636650090",g=e=>{var n=i({experimentKeys:[E,h,m],skipImpression:!0},e),t=[E,h];return"test"!==(null==n?void 0:n[E])&&"internal_override_show_funds"!==(null==n?void 0:n[E])||t.push(m),i({experimentKeys:t},e),a((()=>({cashbackEnabled:null===n?null:"test"===(null==n?void 0:n[E])||"test"===(null==n?void 0:n[h]),plusBundling:null===n?null:"test"===(null==n?void 0:n.plus_bundling_1636650090)})),[n])},f=()=>a((()=>({cashbackEnabled:!1})),[]),k=(e,n)=>{var[{data:t,fetching:r}]=k.useOptimusSubscription(n),{cashbackEnabled:u,plusBundling:s}=g(n),l=i({experimentKeys:[E]},n),{cashbackEnabled:o}=f(),c="internal_override_show_funds"===(null==l?void 0:l[E]),d=t&&t.startDate&&new Date(t.startDate),b=d&&function(e,n){_(2,arguments);var t=v(e),a=v(n);return t.getTime()<a.getTime()}(d,e);return a((()=>({fetching:r||"undefined"==typeof window||null===u||null===s,cashbackEnabled:!!u&&!b||c||o,plusBundling:!!s})),[r,u,s,b,c,o])},w=e=>k(d,e),P=e=>k(b,e),y=e=>{var{eligible:n,subscribed:t}=o(e);return n&&!t},D=["Attraction_Products","AttractionProductsFusion","AttractionProductReview"],x="vf_free_trial_on_exp_1633643226",T=e=>{var n,t=(null==(n=i({experimentKeys:[x]},e))?void 0:n[x])||null,{cashbackEnabled:a}=w(e),r=p(e);return"test 1"===t&&a&&r},K=()=>{var[{page:e}]=r(c),n=!D.includes(e);return T(n)},N="global_nav_to_unbounce___1638464717",S=()=>{var e=i({experimentKeys:[N]});return"test"===(null==e?void 0:e[N])},C=(e,n)=>{var a=S(),{cashbackEnabled:r}=w();return t.useMemo((()=>{var t=new URLSearchParams;return t.append("utm_source",e),t.append("utm_medium",n),a?r?`https://join.plus.tripadvisor.com/startearning/?${t.toString()}`:`https://join.plus.tripadvisor.com/startsaving/?${t.toString()}`:"/Plus"}),[r,a,e,n])},R="bundled_plus_on_exp_1636164643",B=["Attraction_Products","AttractionsFusion","AttractionProductsFusion","AttractionProductReview"],O=e=>{var n=i({experimentKeys:[R]},e),{cashbackEnabled:t}=w(e),a=p(e);return!(null===n||!t||!a)&&"test"===n[R]},A=()=>{var[{page:e}]=r(c),n=!B.includes(e);return O(n)},F="cashback_checkout_variant_test_1634678889",j=()=>{var[e,n]=u(!0),t=i({experimentKeys:[F]});s((()=>{null!==t&&n(!1)}),[t]);var a=null==t?void 0:t[F];return a?{variant:a.toLowerCase(),fetching:e}:{variant:null,fetching:e}},I="cyber_week_1636032656",M=e=>{var n=i({experimentKeys:[I]},e),[{data:t}]=l();return null==t||t.isMember,null!==n&&("countdown"!==n[I]&&n[I],!1)};return[()=>{d=new Date("2021-10-19"),b=new Date("2022-07-01"),k.useOptimusSubscription=l,p=y,e({EXPERIMENT_KEY:E,NATIVE_EXPERIMENT_KEY:h,PLUS_BUNDLING_EXPERIMENT_KEY:m,useBundledPlusOnExperiencesEnabled:O,useBundledPlusOnExperiencesEnabledForPage:A,useCashbackEnabled:w,useCashbackEnabled100Percent:P,useCashbackEnabledForDate:k,useCashbackEnabledRaw:g,useCashbackEnvConfig:f,useCheckoutVariant:j,useCyberWeekEnabled:M,useFreeTrialBannersEnabled:T,useFreeTrialBannersEnabledForPage:K,useOptimusGlobalNavTrafficDiversion:S,useOptimusNavToUnbounce:C})},[e=>(t=e.default,a=e.useMemo,r=e.useContext,u=e.useState,s=e.useEffect),e=>i=e.default,e=>(l=e.useOptimusSubscription,o=e.useOptimusEligibility),e=>c=e.Route]]},["cDcdfi","S-RL4Q","BWm3Dg","2R4xv2"]]);
