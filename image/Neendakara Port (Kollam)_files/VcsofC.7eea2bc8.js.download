(this.$WP=this.$WP||[]).push(["8rGRxX/VcsofC",(e,a)=>{"use strict";var t,n,i,s,o,r,l,c,u,d,p,m,g,k,f,v,b,E,C,_,N,w,h,x,y,O,F,P=({triggerNext:e,onPopupDismiss:a})=>{var[n]=t.useContext(i),{userId:r,sessionId:u}=t.useContext(s),p="MOBILE"===t.useContext(o).viewportCategory,m=()=>{},g=e||m;return t.useEffect((()=>{(l(u)||r||d(n.page,n.params,p))&&a&&a()}),[r,p,a,n,u]),l(u)||r||d(n.page,n.params,p)?null:t.createElement(w,{triggerNext:g,servletName:n.page,onDismiss:()=>{a&&a(),c(u)},trackWouldOpenExplicitPreferences:m,openExplicitPreferences:m,explicitPreferencesEnabled:!1})},S=({localize:e,viewportCategory:a,onDismiss:n,triggerNext:i,openExplicitPreferences:s,trackWouldOpenExplicitPreferences:o,explicitPreferencesEnabled:r,recordEvent:l,domainName:c,appIntegrationConfig:u,login:d})=>{var[p,v]=t.useState(!1),[E,C]=t.useState(!1),[_,N]=t.useState(!1),w=t.useCallback((()=>{_||N(!0)}),[_,N]),h=t.useCallback((()=>{w(),l("facebook_onetap_closed"),n()}),[w,l,n]),x=t.useCallback((()=>{v(!0),window.FB.Event.subscribe("xfbml.render",(()=>{l("facebook_onetap_rendered")})),window.FB.getLoginStatus((e=>{"connected"===e.status||"not_authorized"===e.status?C(!0):(N(!0),i())}))}),[v,C,N,i,l]),y=t.useCallback((()=>{var{sdkUrl:e,appId:a,apiVersion:t}=u;if(e&&a&&t){var n=()=>{},s=new Promise((e=>{n=e}));!function(e,a,t){window.fbAsyncInit=()=>{window.FB.init({appId:e,version:a,status:!0,cookie:!0}),t()}}(a,t,n),s.then(x)}else i()}),[x,u,i]);t.useEffect((()=>{if(_)i();else{l("facebook_onetap_requested");var{sdkUrl:e}=u;m(e||"","MEMX"),y()}}),[y,l,i,_,u]);var O=t.useCallback((e=>{if(!e)return null;var a=e.split(".",2)[1];if(a){var t=atob(a);try{return JSON.parse(t)}catch(e){l("facebook_onetap_parseSignedRequestFailed")}}return null}),[l]),F=t.useCallback((e=>{var a=O(e);a&&a.code&&(g.set("FacebookAuthCode2",a.code,{expires:new Date((new Date).getTime()+5e3),domain:c,path:"/"}),d({flow:"FACEBOOK_ONETAP",pid:40600,flowOrigin:"login",extraQueryParams:{social:"true"},deferShowOverlay:!0,onClose:()=>{h()},onSuccess:e=>{e&&e.userId&&(w(),e.hasCreatedMember&&(o&&o(),r&&s&&s()))}}))}),[d,w,o,h,c,r,s,O]),P=t.useCallback((()=>{l("facebook_onetap_clicked"),window.FB.getLoginStatus((e=>{if("connected"===e.status){var{authResponse:a}=e;a&&a.accessToken&&F(a.signedRequest)}}))}),[l,F]);if(_||!p||!E)return null;var S={headline:e("onetap_message_unlock"),subhead:e("onetap_subhead_signin_alerts_deals")};setTimeout((()=>{window.FB.XFBML.parse()}),50),window.FB.Event.subscribe("auth.authResponseChange",(()=>{P()}));var D="MOBILE"===a;return t.createElement("div",{className:k("bEXwb D Gi B1 Z BB","gIfOX"),style:{bottom:D?"0px":"unset"}},t.createElement(b,{onClick:h}),t.createElement("div",{className:"eMzat w z"},t.createElement("div",{className:"duGRb Ci b f u"},t.createElement("div",null,S.headline)),t.createElement("p",{className:"UBZtH Mc Nb MA NC"},S.subhead),t.createElement("div",{className:"bXoCh w"},t.createElement("div",{className:"fJfEa w"},t.createElement("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":"continue_with","data-show-faces":"true","data-auto-logout-link":"false","data-use-continue-as":"true","data-scope":"email,user_hometown,user_friends,user_likes,user_location,user_status,user_photos",style:{width:"100%"}}))),t.createElement("div",{className:"cLprX Ci"},t.createElement(f,{id:"terms_and_policy_links",args:{0:"/pages/terms.html",1:"/pages/privacy.html",2:"legalLink"}}))))},D=({triggerNext:e,onPopupDismiss:a})=>{var[{page:n}]=t.useContext(i),l=u.includes(n),{trackWouldOpenExplicitPreferences:d}=E("ONBOARDING","FB_ONETAP"),p=t.useCallback((()=>{l&&d()}),[d,l]),m=()=>{},g=()=>{var t=e||m;a&&a(),t()},{localize:k}=v(),f=_(),{viewportCategory:b}=t.useContext(o),{domainName:w}=t.useContext(r),h=C(),y=t.useCallback((e=>{h({module:"facebook_onetap",action:e,context:`${n||"unknown"}`})}),[n,h]),{locale:F}=t.useContext(r),P=F.code,{userId:S,sessionId:D}=t.useContext(s),[{data:I,fetching:B,error:L}]=N({query:O,variables:{locale:P},pause:!!S});return t.useEffect((()=>{!L&&I&&I.Facebook_getFbConnectConfig||a&&a()}),[L,I,a]),B?null:!L&&I&&I.Facebook_getFbConnectConfig?t.createElement(x,{onDismiss:()=>{a&&a(),c(D)},triggerNext:g,trackWouldOpenExplicitPreferences:p,appIntegrationConfig:I.Facebook_getFbConnectConfig,localize:k,viewportCategory:b,recordEvent:y,domainName:w,login:f}):(g(),null)},I=()=>{var[e,a]=t.useState(!1),[r,c]=t.useState("GOOGLE_ONETAP"),{userId:u,sessionId:p}=t.useContext(s),[{page:m,params:g}]=t.useContext(i),k="MOBILE"===t.useContext(o).viewportCategory;t.useEffect((()=>{l(p)||u||d(m,g,k)?a(!0):e&&a(!1)}),[e,u,p,a,m,g,k]);var f=t.useCallback((()=>{c("FACEBOOK_ONETAP")}),[c]),v=()=>null,b=v,E=[],C="registration_dialog";switch(r){case"GOOGLE_ONETAP":E=["google_one_tap"],b=({dismiss:e})=>t.createElement(h,{triggerNext:f,onPopupDismiss:()=>{e()}}),C="google_one_tap";break;case"FACEBOOK_ONETAP":E=["facebook_one_tap"],b=({dismiss:e})=>t.createElement(F,{onPopupDismiss:()=>{e()}}),C="facebook_one_tap"}return n({factory:v,eventTypes:E,key:"skip",tier:100,skip:!0}),n({factory:b,eventTypes:E,key:e?`skip_${C}`:C,tier:200,skip:e}),null};return[()=>{w=p.component.onUsage((()=>a("454gno")),"default"),h=P,x=S,(y=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"FacebookConnectInfoQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locale"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"String"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"Facebook_getFbConnectConfig"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locale"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"sdkUrl"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"apiVersion"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"appId"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":151}}')).__key=0x90736b30f1e1,O=y,F=D,e("default",I)},[e=>t=e,e=>n=e.usePopupHierarchyRender,e=>(i=e.Route,s=e.Visitor,o=e.Device,r=e.Environment),e=>(l=e.shouldSuppressRegistrationDialog,c=e.setRegDialogDismissed,u=e.HOTEL_SERVLETS),e=>d=e.shouldDisableRegDialogForRequiredLoginLithium,e=>(p=e,m=e.importScript),e=>g=e.default,e=>k=e.default,e=>(f=e.UnsafeLocalize,v=e.useLocalize),e=>b=e.CloseIcon,e=>E=e.default,e=>C=e.useGARecorder,e=>_=e.default,e=>N=e.useQuery]]},["cDcdfi","vybtJq","2R4xv2","MWFqPp","wU942v","pLbCP4","vmXh3M","jSLlaY","0DsHEV","xegF5W","2NwMnm","fsml46","mv7yXI","5X2em-"]]);
