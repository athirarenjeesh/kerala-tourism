(this.$WP=this.$WP||[]).push(["_azji4",(e,a)=>{"use strict";var t,i,n,r,l,d,o,u,s,c,m,g,I,v,k,p,y=({businessContact:e,mobileOffer:a,desktopOffer:i,adSlot:n,albumId:r,categoryId:l,typeId:d,mediaId:o,referenceMediaId:u,locationId:c,locationName:I,secondaryTitleContent:v,actionHandler:k,enablePopupFooter:p,hideMASQuickAlbums:y,disableControls:b,getShareUrlForMedia:S,galleryRenderer:f,fullscreenRenderer:O,sort:C,customMobileButtonMenus:R,quickAlbumsConfiguration:h,queryClientOverride:A,heroDataStrategyOverride:N,pageDataStrategyOverride:E,trackingCallback:M})=>t.createElement(s,{mobileRenderer:()=>t.createElement(g,{businessContact:e,offer:a,actionHandler:k,categoryId:l,albumId:r,typeId:d,mediaId:o,referenceMediaId:u,locationId:c,locationName:I,getShareUrlForMedia:S,scrollHideCommerce:p,skipQuickAlbums:y,disableControls:b,customButtonMenus:R,galleryRendererOverride:f,fullscreenRendererOverride:O,sort:C,quickAlbumsConfiguration:h,queryClientOverride:A,heroDataStrategyOverride:N,pageDataStrategyOverride:E,trackingCallback:M}),desktopRenderer:()=>t.createElement(m,{businessContact:e,offer:i,adSlot:n,actionHandler:k,categoryId:l,albumId:r,typeId:d,mediaId:o,referenceMediaId:u,locationId:c,locationName:I,secondaryTitleContent:v,getShareUrlForMedia:S,skipQuickAlbums:y,disableControls:b,galleryRendererOverride:f,fullscreenRendererOverride:O,sort:C,quickAlbumsConfiguration:h,queryClientOverride:A,heroDataStrategyOverride:N,pageDataStrategyOverride:E,trackingCallback:M})}),b=e=>{var a=(null==e?void 0:e.albumId)||d;return n({albumId:a,mediaId:null==e?void 0:e.mediaId,categoryId:a})},S=e=>{var{locationId:a,initialSettings:n,hideHeaderControls:d,hideMASQuickAlbums:s,mobilePortraitFooterSlot:c,enablePopupAnimationMobilePortraitFooter:m,mobileLandscapeHeaderSlot:g,desktopHeaderRightSlot:v,businessContact:y,leftRailSlot:S,onClose:f,actionHandler:O,getShareUrlForMedia:C,galleryRenderer:R,fullscreenRenderer:h,customMobileButtonMenus:A,routeFragmentIdentifier:N,queryClientOverride:E,heroDataStrategyOverride:M,pageDataStrategyOverride:T,quickAlbumsConfiguration:F,trackingCallback:L}=e,[D,_]=t.useState({isOpen:!1,shouldToggle:!1,lock:!1,hasOpened:!1}),U=t.useCallback(((e,a)=>{try{O&&"INITIAL_ALBUM_UPDATE"!==a.type&&O(a)}catch(e){a.type}switch(a.type){case"ROUTE_NAVIGATE":return{...a.newState,sort:e.sort};case"ALBUM":return{...e,albumId:a.albumId,typeId:r(),categoryId:a.categoryId?a.categoryId:a.albumId,mediaId:null};case"FULLSCREEN_NAV":case"GALLERY_CLICK":return a.newMedia.media?{...e,mediaId:{id:a.newMedia.media.mediaId,type:a.newMedia.media.type}}:e;case"FULLSCREEN_CLOSE":return{...e,mediaId:null};case"CATEGORY_CHANGE":return{...e,categoryId:a.categoryId};case"SOURCE_CHANGE":return{...e,typeId:a.typeId};case"INVALIDATE_REFERENCE_MEDIA":return{...e,mediaId:null};case"SORT":return{...e,sort:a.sort};case"CLOSE":return _((e=>e.isOpen?{...e,isOpen:!0,shouldToggle:!0}:e)),e;case"ERROR":return p;default:return e}}),[O]),[q,w]=t.useReducer(U,b(n)),H=null!=N,{clearFragment:B,initialRouteState:P}=o(a,H&&D.isOpen?q:null,N,w);t.useEffect((()=>{n&&!D.isOpen&&(w({type:l.routeNavigate,newState:b(n)}),_((e=>({...e,isOpen:!1,shouldToggle:!0}))))}),[n,_,D]),t.useEffect((()=>{!H||!P||n||D.isOpen||D.hasOpened||D.lock||(w({type:l.routeNavigate,newState:P}),_((e=>({...e,isOpen:!1,shouldToggle:!0}))))}),[H,P,n,D,_]),t.useEffect((()=>{D.shouldToggle&&(D.isOpen&&D.lock?_((e=>({...e,isOpen:!1,shouldToggle:!1,lock:!1}))):D.isOpen||D.lock||_({isOpen:!0,shouldToggle:!1,lock:!0,hasOpened:!0}))}),[D,_]),t.useEffect((()=>{D.isOpen&&D.shouldToggle&&(H&&B(),f&&f())}),[D,f,H,B]);var V=e=>e&&g?g():!e&&c?c():null;if(!D.isOpen)return null;var Q=(null==n?void 0:n.albumId)||(null==P?void 0:P.albumId),G=(null==n?void 0:n.mediaId)||(null==P?void 0:P.mediaId);return t.createElement(i,{query:k,variables:{locationId:a}},(({data:e})=>{var i,n,r,l,o=null==e||null==(i=e.locations)||null==(n=i[0])?void 0:n.name,k=null==e||null==(r=e.locations)||null==(l=r[0])?void 0:l.reviewSummary,p=(null==k?void 0:k.rating)&&(null==k?void 0:k.rating)>=0&&(null==k?void 0:k.count)&&(null==k?void 0:k.count)>0;return t.createElement(I,{enablePopupFooter:m,businessContact:y,mobileOffer:(g||c)&&V,desktopOffer:v,adSlot:S,albumId:q.albumId,categoryId:q.categoryId,typeId:q.typeId,mediaId:q.mediaId,referenceMediaId:q.albumId===Q?G:null,locationId:a,locationName:o,secondaryTitleContent:k&&p?t.createElement(u,{rating:k.rating||0,numReviews:k.count||0}):void 0,actionHandler:w,hideMASQuickAlbums:s,disableControls:d,getShareUrlForMedia:C,galleryRenderer:R,fullscreenRenderer:h,sort:q.sort,customMobileButtonMenus:A,quickAlbumsConfiguration:F,queryClientOverride:E,heroDataStrategyOverride:M,pageDataStrategyOverride:T,trackingCallback:L})}))};return[()=>{m=c.onUsage((()=>a("_azji4/35NN-R")),"default"),g=c.onUsage((()=>a("_azji4/Xncs_3")),"default"),I=t.memo(y),(v=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"MVLocationQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"reviewSummary"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"rating"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"count"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"mediaCount"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":174}}')).__key=0x70f72402d50c,k=v,p=b(),e("default",t.memo(S))},[e=>t=e,e=>i=e.Query,e=>(n=e.buildDefaultState,r=e.getCurrentAllMediaGroupTypeId,l=e.actions,d=e.ALL_ALBUM),e=>o=e.useRouteHandler,e=>u=e.BubbleRatingWithReviewCount,e=>s=e.default,e=>c=e.component]]},["cDcdfi","5X2em-","wc54S1","eh0n4_","MBK0so","RZRW7o","pLbCP4"]]);
