(this.$WP=this.$WP||[]).push(["Ag9Xrp",(e,t)=>{"use strict";var a,n,i,r,l,o,c,s,m,u,p,d,_,g,E,f,b,h,v,y,x,w,C,M,T,I,D,N,P,O,k,B,A,F,j,W,S,R=({title:e,children:t})=>a.createElement(g,{marginBottom:"spacing-04",className:"dXJKQ"},t?a.createElement(a.Fragment,null,a.createElement(m,{variant:"supporting-02",color:"secondaryText",marginBottom:"spacing-02"},e),t):void 0),H=({isMobile:e,onClick:t})=>a.createElement(P,{variant:"primary",fullWidth:e,onClick:t},a.createElement(u,{id:"plus_trial_confirmation_explore_experiences"})),K=({isMobile:e,isTrial:t,...n})=>a.createElement(O,Object.assign({},n,{marginTop:e?"spacing-05":void 0}),t?a.createElement(u,{id:"plus_trial_confirmation_manage_membership"}):a.createElement(u,{id:"plus_paywall_hr_confirmation_manage_subscription"})),L=({isMobile:e,onExploreExperiences:t,isTrial:n,...i})=>a.createElement(g,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center"},a.createElement(B,{isMobile:e,onClick:t}),a.createElement(A,Object.assign({isMobile:e},i,{isTrial:n}))),Y=({hotelId:e,isMobile:t,onNavigateToHr:n,...i})=>e?a.createElement(g,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center"},a.createElement(P,{variant:"primary",onClick:n,fullWidth:t},a.createElement(u,{id:"plus_paywall_hr_confirmation_continue_to_hotel"})),a.createElement(O,Object.assign({},i,{marginTop:t?"spacing-05":void 0}),a.createElement(u,{id:"plus_paywall_hr_confirmation_manage_subscription"}))):a.createElement(g,{display:"flex",className:"dwaya F"},a.createElement(P,Object.assign({},i,{variant:"primary",fullWidth:t}),a.createElement(u,{id:"plus_paywall_hr_confirmation_manage_subscription"}))),V=(e,t,a)=>{switch(e){case"hotels":return{href:"/OptimusAccountManager",target:"_blank",onClick:a};case"attractions":return{href:"/OptimusAccountManager",target:"_blank"};case"memberCenter":return{href:"#",onClick:t};default:return{href:"/OptimusAccountManager",target:"_blank",onClick:a}}},X=({variant:e,hotelId:t,isMobile:n,isTrial:i,closeModal:r,onNavigateToHr:l,onNavigateToMembership:o,onExploreExperiences:c})=>{var s=W(e,r,o);switch(e){case"attractions":return a.createElement(F,Object.assign({isMobile:n,onExploreExperiences:c,isTrial:i},s));case"memberCenter":case"hotels":return a.createElement(j,Object.assign({hotelId:t,isMobile:n,onNavigateToHr:l},s));default:return null}},J="gatgm",G="cbJNG Mk MK",U="Hotel_Review",$=({variant:e})=>{switch(e){case"attractions":return a.createElement(u,{id:"plus_trial_confirmation_title"});case"hotels":return a.createElement(u,{id:"plus_paywall_confirmation_title_v2"});default:return null}},z=({variant:e})=>{switch(e){case"attractions":return a.createElement(u,{id:"plus_trial_confirmation_message_v2"});case"hotels":return a.createElement(u,{id:"plus_paywall_hr_confirmation_member_only_message"});default:return null}},Q=({subscription:e,variant:t,visibleRef:n,sensitiveFlow:i,subscriptionFetching:r,paymentDataFetching:l,primaryCard:o,creditCardType:c,acctNumberTail:s,expMonth:p,expYear:_,formattedRenewalDate:E,formattedPurchaseDate:f,membershipButtonProps:v,onExploreExperiences:x,intlFormatter:w})=>{var C,M,T,I=null==e?void 0:e.trialDetails,{viewportCategory:D}=a.useContext(b),N="MOBILE"===D,P=null==e||null==(C=e.subscriptionPrice)?void 0:C.amountPaid,O=null==I?void 0:I.trialPeriodPrice,F=null!=O&&O.totalAmount&&null!=O&&null!=(M=O.discountAmount)&&M.discountAmount?(null==O?void 0:O.totalAmount)-(null==O||null==(T=O.discountAmount)?void 0:T.discountAmount):0;return a.createElement("div",{className:J,ref:n},a.createElement(d,{variant:"plus-logo-short",height:44}),a.createElement(m,{variant:"expressive-display-03",marginTop:"spacing-03",marginBottom:"spacing-03"},a.createElement($,{variant:t})),i&&a.createElement(m,{variant:"title-05"},a.createElement(u,{id:"plus_trial_confirmation_membership_details_subtitle",args:{email:null==i?void 0:i.email}})),r||l?a.createElement(a.Fragment,null,a.createElement(h,{height:24,width:"100%",marginTop:6}),a.createElement(h,{height:24,width:"70%",marginTop:6}),a.createElement(h,{height:24,width:"70%",marginTop:6}),a.createElement(h,{height:24,width:"100%",marginTop:6,marginBottom:6})):a.createElement(g,{display:"flex",marginTop:"spacing-04",flexDirection:["column","row","row"],flexWrap:"wrap",justifyContent:"space-between"},P&&a.createElement(k,{title:a.createElement(u,{id:"plus_confirmation_price_section"})},a.createElement("span",null,a.createElement(u,{id:"plus_trial_account_management_price_today_v2",args:{0:w.formatCurrencyInteger(F),numMonths:(null==I?void 0:I.trialPeriodDuration)||0}}))),(null==e?void 0:e.subscriptionNumber)&&a.createElement(k,{title:a.createElement(u,{id:"plus_confirmation_membership_number_section"})},a.createElement(m,{variant:"body-01"},e.subscriptionNumber)),a.createElement(k,{title:a.createElement(u,{id:"plus_confirmation_payment_section"})},o&&a.createElement(y,{paymentMethod:{cardType:c,numberTail:s,expiryMonth:p,expiryYear:_},hideExpiration:!0,cardNumberLeadMessage:"•••• •••• ••••"})),f&&a.createElement(k,{title:o?a.createElement(u,{id:"plus_confirmation_date_purchased_section"}):a.createElement(u,{id:"plus_confirmation_start_date_section"})},a.createElement(m,{variant:"body-01"},f)),E&&a.createElement(k,{title:a.createElement(u,{id:"plus_confirmation_date_renews_section_v2"})},a.createElement(m,{variant:"body-01"},E)),a.createElement(g,{display:"flex",alignItems:"flex-end",marginBottom:"spacing-04",className:"cPoav Na"},a.createElement(A,Object.assign({isMobile:N},v,{isTrial:!0})))),a.createElement("div",{className:G}),a.createElement(m,{variant:"body-01",marginTop:"spacing-02",marginBottom:"spacing-02"},a.createElement(u,{id:"plus_trial_confirmation_message_v3"})),a.createElement(B,{isMobile:N,onClick:x}))},Z=({funnelKey:e,closeModal:t,hotelId:n,variant:_="hotels"})=>{var P,O,B,A,F=C(),j=M(),R=i((()=>e||I()),[e]),[,{uid:H}]=r(E),{userId:K}=a.useContext(f),L=null!==K,{clearDiscountCode:Y}=N();l((()=>{Y()}));var[{data:V,fetching:X},Z]=D(),[q,ee]=o(0);l((()=>{!(q<3)||null!=V&&V.isMember||X||(ee(q+1),Z())}),[q,Z,V,X]);var te=w((()=>{F({optimusConfirmationModal:{locationId:n,funnelKey:R,pageviewUid:H}})})),ae=T("PLUS_CONFIRM"),ne=c(ae);l((()=>{null==ne||null==ne.current||ne.current()}),[ne]);var ie=s((e=>{j({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:e,locationId:n,isMemberSignedIn:L,servletName:U,funnelKey:R}}})}),[R,j,L,n]),re=s((()=>{t(),ie("HR")}),[t,ie]),le=s((()=>{ie("PlusMembershipCenter")}),[ie]),oe=s((()=>{t()}),[t]),{viewportCategory:ce}=a.useContext(b),se="MOBILE"===ce,me=p(),[ue]=v(),[{data:pe,fetching:de}]=x({billingAccountId:null==V?void 0:V.billingAccountId}),_e=null!=pe&&pe.storedCardId?pe:null,{acctNumberTail:ge,creditCardType:Ee,expMonth:fe,expYear:be}=_e||{},he=null==V?void 0:V.trialDetails,ve="ACTIVE"===(null==he?void 0:he.trialStatus),ye=null==V||null==(P=V.subscriptionPrice)?void 0:P.amountPaid,xe=null==V||null==(O=V.nextCharge)?void 0:O.totalAmount,we=!(null==V||null==(B=V.subscriptionPrice)||!B.discountAmount)&&0===ye,Ce=!(null==V||null==(A=V.subscriptionPrice)||!A.discountAmount)&&(null==xe||null==ye||xe>ye),Me=null!=V&&V.startDate?me.formatDate("date_long",V.startDate):null,Te=null;null!=V&&V.renewalDate&&(Te=me.formatDate("date_long",V.renewalDate)),null!=V&&V.autoRenew||null==V||!V.endDate||ve||(Te=a.createElement(u,{id:"plus_management_center_non_renewing_member",args:{0:me.formatDate("date_long",V.endDate)}}));var Ie=a.createElement(S,{variant:_,isMobile:se,isTrial:ve,hotelId:n,closeModal:t,onNavigateToHr:re,onNavigateToMembership:le,onExploreExperiences:oe}),De=W(_,t,le);return ve?a.createElement(Q,{subscription:V,variant:_,visibleRef:te,sensitiveFlow:ue,subscriptionFetching:X,paymentDataFetching:de,amountPaid:ye,primaryCard:_e,creditCardType:Ee,acctNumberTail:ge,expMonth:fe,expYear:be,formattedRenewalDate:Te,formattedPurchaseDate:Me,membershipButtonProps:De,onExploreExperiences:oe,intlFormatter:me}):a.createElement("div",{className:J,ref:te},a.createElement(d,{variant:"plus-logo-short",height:44}),a.createElement(m,{variant:"expressive-display-03",marginTop:"spacing-03",marginBottom:"spacing-03"},a.createElement($,{variant:_})),a.createElement(m,{variant:"body-01",marginTop:"spacing-02"},a.createElement(z,{variant:_})),a.createElement("div",{className:G}),a.createElement(m,{variant:"title-05"},a.createElement(u,{id:"plus_paywall_hr_confirmation_membership_details_title"})),ue&&a.createElement(m,{variant:"body-01",marginTop:"spacing-01"},a.createElement(u,{id:"plus_paywall_hr_confirmation_membership_details_subtitle",args:{email:null==ue?void 0:ue.email}})),X||de?a.createElement(a.Fragment,null,a.createElement(h,{height:24,width:"100%",marginTop:6}),a.createElement(h,{height:24,width:"70%",marginTop:6}),a.createElement(h,{height:24,width:"70%",marginTop:6}),a.createElement(h,{height:24,width:"100%",marginTop:6,marginBottom:6})):a.createElement(g,{display:"flex",marginTop:"spacing-04",flexDirection:["column","row","row"],flexWrap:"wrap",justifyContent:"space-between"},!ve&&(ye||we)&&a.createElement(k,{title:a.createElement(u,{id:"plus_confirmation_price_section"})},a.createElement(m,{variant:"body-01"},ye?a.createElement(u,{id:"plus_account_management_price_per_year",args:{0:Math.floor(ye)===ye?me.formatCurrencyInteger(ye):me.formatCurrency(ye)}}):me.formatCurrencyInteger(0)),Ce&&_e&&a.createElement(m,{variant:"supporting-01"},a.createElement(u,{id:"plus_account_management_price_discounted"}))),(null==V?void 0:V.subscriptionNumber)&&a.createElement(k,{title:a.createElement(u,{id:"plus_confirmation_subscription_number_section"})},a.createElement(m,{variant:"body-01"},V.subscriptionNumber)),a.createElement(k,{title:a.createElement(u,{id:"plus_confirmation_payment_section"})},_e&&a.createElement(y,{paymentMethod:{cardType:Ee,numberTail:ge,expiryMonth:fe,expiryYear:be},hideExpiration:!0,cardNumberLeadMessage:"•••• •••• ••••"})),Me&&a.createElement(k,{title:_e?a.createElement(u,{id:"plus_confirmation_date_purchased_section"}):a.createElement(u,{id:"plus_confirmation_start_date_section"})},a.createElement(m,{variant:"body-01"},Me)),Te&&a.createElement(k,{title:a.createElement(u,{id:"plus_confirmation_date_renews_section"})},a.createElement(m,{variant:"body-01"},Te))),a.createElement(g,{marginTop:"spacing-04",marginBottom:"spacing-05"},Ie))},q=({funnelKey:e,closeModal:t,hotelId:n})=>{var r=M(),l=i((()=>e||I()),[e]),{userId:o}=a.useContext(f),c=null!==o,m=s((()=>{t(),r({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:"Dismiss",locationId:n,isMemberSignedIn:c,servletName:U,funnelKey:l}}})}),[t,l,r,c,n]);return a.createElement(_,{onClose:m,backgroundColor:"beige"},a.createElement(Z,{funnelKey:l,hotelId:n,closeModal:t}))};return[()=>{k=R,B=H,A=K,F=L,j=Y,W=V,S=X,e({IsConfirmationModalOpen:n(!1),SubscriptionConfirmation:Z,default:q})},[e=>(a=e.default,n=e.createContext,i=e.useMemo,r=e.useContext,l=e.useEffect,o=e.useState,c=e.useRef,s=e.useCallback),e=>m=e.default,e=>(u=e.default,p=e.useIntlFormatter),e=>d=e.default,e=>_=e.ModalContainer,e=>g=e.Box,e=>(E=e.Route,f=e.Visitor,b=e.Device),e=>h=e.default,e=>v=e.useSensitiveFlowState,e=>y=e.default,e=>x=e.useDefaultPaymentData,e=>w=e.useOnVisible,e=>C=e.useImpressionLogger,e=>M=e.useInteractionLogger,e=>T=e.usePixelCallback,e=>I=e.uuid,e=>D=e.useOptimusSubscription,e=>N=e.useDiscountCodePersistance,e=>(P=e.default,O=e.BorderlessButtonLink)]]},["cDcdfi","VP50Wc","0DsHEV","TkeYrn","E1X9WP","SzaY02","2R4xv2","Xi-2HZ","rSObt2","1jVxH0","bk1Dsb","BLrxBS","30t50h","fsml46","jb_4W2","O-HcBE","BWm3Dg","P89JOf","7yGKf-"]]);
